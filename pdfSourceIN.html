<html><head><meta charset="UTF-8"><script src="https://cdn.jsdelivr.net/npm/prismjs/prism.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-bash.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/prism.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-css.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/prism.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-dockerfile.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/prism.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-groovy.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/prism.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-javascript.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/prism.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-json.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/prism.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-nginx.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/prism.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-none.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/prism.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-sql.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/prism.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-yaml.min.js"></script><style>
        .article {
            position: relative;
            padding-bottom: 24px;
        }
        

        .center {
            display: block;
            margin-left: auto;
            margin-right: auto;
        }
        

        .center-text {
            text-align: center;
        }
        

        .code-block {
            overflow: hidden;
            position: relative;
            padding: 0;
            border-radius: 8px;
            font-variant-ligatures: none;
            background-color: rgba(25, 25, 28, .05);
            word-break: break-all;
        }
        

        .container {
            max-width: 100%;
            overflow: hidden;
            page-break-inside: avoid;
            display: block;
        }
        

        .control {
            color: #19191c;
            font-size: 16px;
            font-weight: 670;
        }
        

        .detached {
            margin-block-start: 0;
            margin-block-end: 0;
            margin-bottom: 8px;
        }
        

        .image {
            max-width: 100%;
            max-height: 90vh;
            width: auto;
        }
        

        .image-container {
            max-width: 100vw;
        }
        

        .image-size {
            height: auto;
        }
        

        .inline-code {
            border-radius: 4px;
            display: inline;
            padding: 2px 1px;
            font-family: JetBrains Sans,monospace;
            background: #e6e6e6;
        }
        

        .list {
            list-style-type: disc;
            padding-left: 0;
            margin-left: 15px;
        }
        

        .list-decimal {
            list-style-type: decimal;
        }
        

        .list-item {
            margin-top: 6px;
            margin-bottom: 6px;
            margin-left: 4px;
        }
        

        .main-title {
            padding-bottom: 24px;
            margin-top: 0;
            font-size: 40px;
            margin-block-start: 0;
            margin-block-end: 0;
        }
        

        .prism {
            page-break-inside: avoid;
        }
        
        /* PrismJS 1.29.0
https://prismjs.com/download.html#themes=prism&languages=markup+css+clike+javascript+abap+abnf+actionscript+ada+agda+al+antlr4+apacheconf+apex+apl+applescript+aql+arduino+arff+armasm+arturo+asciidoc+aspnet+asm6502+asmatmel+autohotkey+autoit+avisynth+avro-idl+awk+bash+basic+batch+bbcode+bbj+bicep+birb+bison+bnf+bqn+brainfuck+brightscript+bro+bsl+c+csharp+cpp+cfscript+chaiscript+cil+cilkc+cilkcpp+clojure+cmake+cobol+coffeescript+concurnas+csp+cooklang+coq+crystal+css-extras+csv+cue+cypher+d+dart+dataweave+dax+dhall+diff+django+dns-zone-file+docker+dot+ebnf+editorconfig+eiffel+ejs+elixir+elm+etlua+erb+erlang+excel-formula+fsharp+factor+false+firestore-security-rules+flow+fortran+ftl+gml+gap+gcode+gdscript+gedcom+gettext+gherkin+git+glsl+gn+linker-script+go+go-module+gradle+graphql+groovy+haml+handlebars+haskell+haxe+hcl+hlsl+hoon+http+hpkp+hsts+ichigojam+icon+icu-message-format+idris+ignore+inform7+ini+io+j+java+javadoc+javadoclike+javastacktrace+jexl+jolie+jq+jsdoc+js-extras+json+json5+jsonp+jsstacktrace+js-templates+julia+keepalived+keyman+kotlin+kumir+kusto+latex+latte+less+lilypond+liquid+lisp+livescript+llvm+log+lolcode+lua+magma+makefile+markdown+markup-templating+mata+matlab+maxscript+mel+mermaid+metafont+mizar+mongodb+monkey+moonscript+n1ql+n4js+nand2tetris-hdl+naniscript+nasm+neon+nevod+nginx+nim+nix+nsis+objectivec+ocaml+odin+opencl+openqasm+oz+parigp+parser+pascal+pascaligo+psl+pcaxis+peoplecode+perl+php+phpdoc+php-extras+plant-uml+plsql+powerquery+powershell+processing+prolog+promql+properties+protobuf+pug+puppet+pure+purebasic+purescript+python+qsharp+q+qml+qore+r+racket+cshtml+jsx+tsx+reason+regex+rego+renpy+rescript+rest+rip+roboconf+robotframework+ruby+rust+sas+sass+scss+scala+scheme+shell-session+smali+smalltalk+smarty+sml+solidity+solution-file+soy+sparql+splunk-spl+sqf+sql+squirrel+stan+stata+iecst+stylus+supercollider+swift+systemd+t4-templating+t4-cs+t4-vb+tap+tcl+tt2+textile+toml+tremor+turtle+twig+typescript+typoscript+unrealscript+uorazor+uri+v+vala+vbnet+velocity+verilog+vhdl+vim+visual-basic+warpscript+wasm+web-idl+wgsl+wiki+wolfram+wren+xeora+xml-doc+xojo+xquery+yaml+yang+zig&plugins=highlight-keywords */
code[class*=language-],pre[class*=language-]{color:#000;background:0 0;text-shadow:0 1px #fff;font-family:Consolas,Monaco,'Andale Mono','Ubuntu Mono',monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:16px;margin:0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}

        

        :root {
            width: 95%;
            max-width: 95vw;
            padding: 0 0 0 30px;
        }
        
        body {
            font-family: JetBrains Sans,serif;
        }
        
        a {
            overflow-wrap: anywhere;
            width: 100vw;
        }
        
        
        @font-face {
            font-family: JetBrains Sans;
            src: url(https://resources.jetbrains.com/storage/jetbrains-sans/JetBrainsSans-Light.woff2) format("woff2"), url(https://resources.jetbrains.com/storage/jetbrains-sans/JetBrainsSans-Light.woff) format("woff");
            font-weight: 300;
            font-style: normal;
        }

        @font-face {
            font-family: JetBrains Sans;
            src: url(https://resources.jetbrains.com/storage/jetbrains-sans/JetBrainsSans-Regular.woff2) format("woff2"), url(https://resources.jetbrains.com/storage/jetbrains-sans/JetBrainsSans-Regular.woff) format("woff");
            font-weight: 400;
            font-style: normal;
        }

        @font-face {
            font-family: JetBrains Sans;
            src: url(https://resources.jetbrains.com/storage/jetbrains-sans/JetBrainsSans-SemiBold.woff2) format("woff2"), url(https://resources.jetbrains.com/storage/jetbrains-sans/JetBrainsSans-SemiBold.woff) format("woff");
            font-weight: 600;
            font-style: normal;
        }
        
        
        code {
            display: inline;
            word-break: break-word;
            font-size: 15px;
            line-height: inherit;
            font-variant-ligatures: none;
            font-family: JetBrains Sans,monospace;
            white-space: pre-line;
            overflow-wrap: break-word;
        }
        
        figcaption {
            margin-top: 5px;
        }
        
        h2 {
            padding-top: 16px;
            padding-bottom: 8px;
            margin-block-start: 0;
            margin-block-end: 0;
        }
        
        h3 {
            padding-top: 8px;
            padding-bottom: 8px;
            margin-block-start: 0;
            margin-block-end: 0;
        }
        
        h4 {
            padding-top: 4px;
            padding-bottom: 8px;
            margin-block-start: 0;
            margin-block-end: 0;
        }
        
        p {
            padding: 0;
            border: 0;
            line-height: 25px;
            margin-block-start: 0;
            margin-block-end: 0;
            padding-bottom: 8px;
        }
        
        div {
            display: block;
        }
        
        table {
            border-collapse: collapse;
            width: 100%;
            page-break-inside: avoid;
        }
        
        th, td {
            border: 1px solid #c4c4c4;
            padding: 10px;
            text-align: left;
            word-break: break-all;
        }
        
        .entry {
            display: grid;
            grid-template-columns: auto max-content;
            grid-template-areas: "chapter page";
            align-items: end;
            gap: 0 .25rem;
            line-height: 25px;
        }
        
        .toc-link-container{
            grid-area: chapter;
            position: relative;
            overflow: hidden;
        }
        
        .toc-link{
            text-decoration: none;
            color: black;
        }
        
        .toc-link-container::after {
            position: absolute;
            padding-left: .25ch;
            content: " . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . "
            ". . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . "
            ". . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . ";
            text-align: right;
        }
        
        .page {
            grid-area: page;
            width: 30px;
            text-align: right;
        }
        

        .topic {
            page-break-before: always;
        }
        </style></head><body><div><section class="topic"><div><article class="article"><h1 class="main-title">Table of contents</h1><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#1446709650">1️⃣ Getting started with docker ️?</a></div><div class="page">2</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#2101908822">2️⃣ Dockerizing MongoDB</a></div><div class="page">12</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#-360695856">3️⃣ Dockerizing PostgreSQL</a></div><div class="page">19</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#1933182566">4️⃣ Dockerizing MySQL</a></div><div class="page">27</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#1932050508">5️⃣ Dockerizing MSSQL</a></div><div class="page">35</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#2032313741">Restore the old Context Menu in Windows 11</a></div><div class="page">44</div></div><div class="entry"><div class="toc-link-container"><a class="toc-link" href="#-1148225448">Dockerizing a React App with Node.js, Postgres, and Nginx &lt;Dev &amp; Prod&gt;</a></div><div class="page">45</div></div></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="1446709650">1️⃣ Getting started with docker ️?</h1><section><h2 id="1446709650#chapter-1-introduction-to-docker" data-toc="chapter-1-introduction-to-docker#Getting-started-with-docker.md-chapter-1-introduction-to-docker">Chapter 1: Introduction to Docker</h2><section><h3 id="1446709650#1-1-what-is-docker" data-toc="1-1-what-is-docker#Getting-started-with-docker.md-1-1-what-is-docker">1.1 What is Docker?</h3><p id="1446709650#-apd569_17">Docker is a platform that enables developers to package, deploy, and run applications in containers. Containers include everything needed to run the application, making it portable and consistent across different environments.</p></section><section><h3 id="1446709650#1-2-why-use-docker" data-toc="1-2-why-use-docker#Getting-started-with-docker.md-1-2-why-use-docker">1.2 Why Use Docker?</h3><ul class="list" id="1446709650#-apd569_18" start="1"><li class="list-item" id="1446709650#-apd569_19"><p>Consistency across development, testing, and production environments</p></li><li class="list-item" id="1446709650#-apd569_20"><p>Isolation and security</p></li><li class="list-item" id="1446709650#-apd569_21"><p>Simplified dependency management</p></li><li class="list-item" id="1446709650#-apd569_22"><p>Efficient resource utilization</p></li></ul></section></section><section><h2 id="1446709650#chapter-2-installing-docker-on-windows" data-toc="chapter-2-installing-docker-on-windows#Getting-started-with-docker.md-chapter-2-installing-docker-on-windows">Chapter 2: Installing Docker on Windows</h2><section><h3 id="1446709650#2-1-docker-installation" data-toc="2-1-docker-installation#Getting-started-with-docker.md-2-1-docker-installation">2.1 Docker Installation</h3><ol class="list list-decimal" id="1446709650#-apd569_24" type="1" start="1"><li class="list-item" id="1446709650#-apd569_25"><p id="1446709650#-apd569_29">Download Docker Desktop from the Docker website (<a href="https://www.docker.com/products/docker-desktop">https://www.docker.com/products/docker-desktop</a>).</p></li><li class="list-item" id="1446709650#-apd569_26"><p id="1446709650#-apd569_31">Run the installer and follow the on-screen instructions.</p></li><li class="list-item" id="1446709650#-apd569_27"><p id="1446709650#-apd569_32">After installation, launch Docker Desktop.</p></li><li class="list-item" id="1446709650#-apd569_28"><p id="1446709650#-apd569_33">Ensure Docker is running by opening a terminal and typing:</p><div class="detached code-block" id="1446709650#-apd569_34"><pre><code class="language-bash">docker --version</code></pre></div></li></ol></section></section><section><h2 id="1446709650#chapter-3-docker-basics" data-toc="chapter-3-docker-basics#Getting-started-with-docker.md-chapter-3-docker-basics">Chapter 3: Docker Basics</h2><section><h3 id="1446709650#3-1-docker-architecture" data-toc="3-1-docker-architecture#Getting-started-with-docker.md-3-1-docker-architecture">3.1 Docker Architecture</h3><ul class="list" id="1446709650#-apd569_38" start="1"><li class="list-item" id="1446709650#-apd569_39"><p><span class="control" id="1446709650#-apd569_44">Docker Client</span>: CLI to interact with Docker.</p></li><li class="list-item" id="1446709650#-apd569_40"><p><span class="control" id="1446709650#-apd569_45">Docker Daemon</span>: Runs on the host machine, manages Docker objects.</p></li><li class="list-item" id="1446709650#-apd569_41"><p><span class="control" id="1446709650#-apd569_46">Docker Images</span>: Read-only templates to create containers.</p></li><li class="list-item" id="1446709650#-apd569_42"><p><span class="control" id="1446709650#-apd569_47">Docker Containers</span>: Running instances of Docker images.</p></li><li class="list-item" id="1446709650#-apd569_43"><p><span class="control" id="1446709650#-apd569_48">Docker Registry</span>: Stores Docker images.</p></li></ul></section><section><h3 id="1446709650#3-2-hello-world-in-docker" data-toc="3-2-hello-world-in-docker#Getting-started-with-docker.md-3-2-hello-world-in-docker">3.2 Hello World in Docker</h3><ol class="list list-decimal" id="1446709650#-apd569_49" type="1" start="1"><li class="list-item" id="1446709650#-apd569_50"><p id="1446709650#-apd569_52">Open PowerShell or Command Prompt.</p></li><li class="list-item" id="1446709650#-apd569_51"><p id="1446709650#-apd569_53">Run your first container:</p><div class="detached code-block" id="1446709650#-apd569_54"><pre><code class="language-bash">docker run hello-world</code></pre></div></li></ol></section><section><h3 id="1446709650#3-3-docker-cli-basics" data-toc="3-3-docker-cli-basics#Getting-started-with-docker.md-3-3-docker-cli-basics">3.3 Docker CLI Basics</h3><ul class="list" id="1446709650#-apd569_55" start="1"><li class="list-item" id="1446709650#-apd569_56"><p id="1446709650#-apd569_58">List Docker CLI commands:</p><div class="detached code-block" id="1446709650#-apd569_59"><pre><code class="language-bash">docker</code></pre></div></li><li class="list-item" id="1446709650#-apd569_57"><p id="1446709650#-apd569_60">Get help on a command:</p><div class="detached code-block" id="1446709650#-apd569_61"><pre><code class="language-bash">docker &lt;command&gt; --help</code></pre></div></li></ul></section></section><section><h2 id="1446709650#chapter-4-working-with-docker-images" data-toc="chapter-4-working-with-docker-images#Getting-started-with-docker.md-chapter-4-working-with-docker-images">Chapter 4: Working with Docker Images</h2><section><h3 id="1446709650#4-1-pulling-images" data-toc="4-1-pulling-images#Getting-started-with-docker.md-4-1-pulling-images">4.1 Pulling Images</h3><ul class="list" id="1446709650#-apd569_65" start="1"><li class="list-item" id="1446709650#-apd569_66"><p id="1446709650#-apd569_67">Pull an image from Docker Hub:</p><div class="detached code-block" id="1446709650#-apd569_68"><pre><code class="language-bash">docker pull node</code></pre></div></li></ul></section><section><h3 id="1446709650#4-2-listing-images" data-toc="4-2-listing-images#Getting-started-with-docker.md-4-2-listing-images">4.2 Listing Images</h3><ul class="list" id="1446709650#-apd569_69" start="1"><li class="list-item" id="1446709650#-apd569_70"><p id="1446709650#-apd569_71">List all images on your system:</p><div class="detached code-block" id="1446709650#-apd569_72"><pre><code class="language-bash">docker images</code></pre></div></li></ul></section><section><h3 id="1446709650#4-3-removing-images" data-toc="4-3-removing-images#Getting-started-with-docker.md-4-3-removing-images">4.3 Removing Images</h3><ul class="list" id="1446709650#-apd569_73" start="1"><li class="list-item" id="1446709650#-apd569_74"><p id="1446709650#-apd569_75">Remove an image:</p><div class="detached code-block" id="1446709650#-apd569_76"><pre><code class="language-bash">docker rmi &lt;image_id&gt;</code></pre></div></li></ul></section></section><section><h2 id="1446709650#chapter-5-docker-containers" data-toc="chapter-5-docker-containers#Getting-started-with-docker.md-chapter-5-docker-containers">Chapter 5: Docker Containers</h2><section><h3 id="1446709650#5-1-running-containers" data-toc="5-1-running-containers#Getting-started-with-docker.md-5-1-running-containers">5.1 Running Containers</h3><ul class="list" id="1446709650#-apd569_81" start="1"><li class="list-item" id="1446709650#-apd569_82"><p id="1446709650#-apd569_84">Run a Node.js container interactively:</p><div class="detached code-block" id="1446709650#-apd569_85"><pre><code class="language-bash">docker run -it node /bin/bash</code></pre></div></li><li class="list-item" id="1446709650#-apd569_83"><p id="1446709650#-apd569_86">Run a container in the background:</p><div class="detached code-block" id="1446709650#-apd569_87"><pre><code class="language-bash">docker run -d node</code></pre></div></li></ul></section><section><h3 id="1446709650#5-2-listing-containers" data-toc="5-2-listing-containers#Getting-started-with-docker.md-5-2-listing-containers">5.2 Listing Containers</h3><ul class="list" id="1446709650#-apd569_88" start="1"><li class="list-item" id="1446709650#-apd569_89"><p id="1446709650#-apd569_91">List all running containers:</p><div class="detached code-block" id="1446709650#-apd569_92"><pre><code class="language-bash">docker ps</code></pre></div></li><li class="list-item" id="1446709650#-apd569_90"><p id="1446709650#-apd569_93">List all containers (including stopped):</p><div class="detached code-block" id="1446709650#-apd569_94"><pre><code class="language-bash">docker ps -a</code></pre></div></li></ul></section><section><h3 id="1446709650#5-3-stopping-containers" data-toc="5-3-stopping-containers#Getting-started-with-docker.md-5-3-stopping-containers">5.3 Stopping Containers</h3><ul class="list" id="1446709650#-apd569_95" start="1"><li class="list-item" id="1446709650#-apd569_96"><p id="1446709650#-apd569_97">Stop a running container:</p><div class="detached code-block" id="1446709650#-apd569_98"><pre><code class="language-bash">docker stop &lt;container_id&gt;</code></pre></div></li></ul></section><section><h3 id="1446709650#5-4-removing-containers" data-toc="5-4-removing-containers#Getting-started-with-docker.md-5-4-removing-containers">5.4 Removing Containers</h3><ul class="list" id="1446709650#-apd569_99" start="1"><li class="list-item" id="1446709650#-apd569_100"><p id="1446709650#-apd569_101">Remove a container:</p><div class="detached code-block" id="1446709650#-apd569_102"><pre><code class="language-bash">docker rm &lt;container_id&gt;</code></pre></div></li></ul></section></section><section><h2 id="1446709650#chapter-6-dockerfile" data-toc="chapter-6-dockerfile#Getting-started-with-docker.md-chapter-6-dockerfile">Chapter 6: Dockerfile</h2><section><h3 id="1446709650#6-1-introduction-to-dockerfile" data-toc="6-1-introduction-to-dockerfile#Getting-started-with-docker.md-6-1-introduction-to-dockerfile">6.1 Introduction to Dockerfile</h3><p id="1446709650#-apd569_107">A Dockerfile is a text document that contains instructions for building a Docker image.</p></section><section><h3 id="1446709650#6-2-creating-a-dockerfile-for-node-js" data-toc="6-2-creating-a-dockerfile-for-node-js#Getting-started-with-docker.md-6-2-creating-a-dockerfile-for-node-js">6.2 Creating a Dockerfile for Node.js</h3><ol class="list list-decimal" id="1446709650#-apd569_108" type="1" start="1"><li class="list-item" id="1446709650#-apd569_109"><p id="1446709650#-apd569_112">Create a directory for your Node.js application, e.g., <span class="inline-code" id="1446709650#-apd569_113">my-node-app</span>.</p></li><li class="list-item" id="1446709650#-apd569_110"><p id="1446709650#-apd569_114">Inside this directory, create a file named <span class="inline-code" id="1446709650#-apd569_115">Dockerfile</span>.</p></li><li class="list-item" id="1446709650#-apd569_111"><p id="1446709650#-apd569_116">Add the following content:</p><div class="detached code-block" id="1446709650#-apd569_117"><pre><code class="language-bash"># Use an official Node.js runtime as a parent image
FROM node:14

# Set the working directory in the container
WORKDIR /usr/src/app

# Copy package.json and package-lock.json
COPY package*.json ./

# Install dependencies
RUN npm install

# Copy the rest of the application code
COPY . .

# Expose port 3000
EXPOSE 3000

# Command to run the application
CMD [&quot;node&quot;, &quot;index.js&quot;]</code></pre></div></li></ol></section><section><h3 id="1446709650#6-3-building-an-image" data-toc="6-3-building-an-image#Getting-started-with-docker.md-6-3-building-an-image">6.3 Building an Image</h3><ul class="list" id="1446709650#-apd569_118" start="1"><li class="list-item" id="1446709650#-apd569_119"><p id="1446709650#-apd569_120">Build an image from the Dockerfile:</p><div class="detached code-block" id="1446709650#-apd569_121"><pre><code class="language-bash">docker build -t my-node-app .</code></pre></div></li></ul></section><section><h3 id="1446709650#6-4-running-your-image" data-toc="6-4-running-your-image#Getting-started-with-docker.md-6-4-running-your-image">6.4 Running Your Image</h3><ul class="list" id="1446709650#-apd569_122" start="1"><li class="list-item" id="1446709650#-apd569_123"><p id="1446709650#-apd569_124">Run the image as a container:</p><div class="detached code-block" id="1446709650#-apd569_125"><pre><code class="language-bash">docker run -p 3000:3000 my-node-app</code></pre></div></li></ul></section></section><section><h2 id="1446709650#chapter-7-docker-volumes" data-toc="chapter-7-docker-volumes#Getting-started-with-docker.md-chapter-7-docker-volumes">Chapter 7: Docker Volumes</h2><section><h3 id="1446709650#7-1-introduction-to-volumes" data-toc="7-1-introduction-to-volumes#Getting-started-with-docker.md-7-1-introduction-to-volumes">7.1 Introduction to Volumes</h3><p id="1446709650#-apd569_129">Volumes are used to persist data generated by and used by Docker containers.</p></section><section><h3 id="1446709650#7-2-creating-volumes" data-toc="7-2-creating-volumes#Getting-started-with-docker.md-7-2-creating-volumes">7.2 Creating Volumes</h3><ul class="list" id="1446709650#-apd569_130" start="1"><li class="list-item" id="1446709650#-apd569_131"><p id="1446709650#-apd569_132">Create a volume:</p><div class="detached code-block" id="1446709650#-apd569_133"><pre><code class="language-bash">docker volume create my-volume</code></pre></div></li></ul></section><section><h3 id="1446709650#7-3-using-volumes" data-toc="7-3-using-volumes#Getting-started-with-docker.md-7-3-using-volumes">7.3 Using Volumes</h3><ul class="list" id="1446709650#-apd569_134" start="1"><li class="list-item" id="1446709650#-apd569_135"><p id="1446709650#-apd569_136">Use a volume in a container:</p><div class="detached code-block" id="1446709650#-apd569_137"><pre><code class="language-bash">docker run -d -v my-volume:/usr/src/app my-node-app</code></pre></div></li></ul></section></section><section><h2 id="1446709650#chapter-8-docker-compose" data-toc="chapter-8-docker-compose#Getting-started-with-docker.md-chapter-8-docker-compose">Chapter 8: Docker Compose</h2><section><h3 id="1446709650#8-1-introduction-to-docker-compose" data-toc="8-1-introduction-to-docker-compose#Getting-started-with-docker.md-8-1-introduction-to-docker-compose">8.1 Introduction to Docker Compose</h3><p id="1446709650#-apd569_141">Docker Compose is a tool for defining and running multi-container Docker applications.</p></section><section><h3 id="1446709650#8-2-creating-a-docker-compose-yml-for-node-js-and-react" data-toc="8-2-creating-a-docker-compose-yml-for-node-js-and-react#Getting-started-with-docker.md-8-2-creating-a-docker-compose-yml-for-node-js-and-react">8.2 Creating a docker-compose.yml for Node.js and React</h3><ol class="list list-decimal" id="1446709650#-apd569_143" type="1" start="1"><li class="list-item" id="1446709650#-apd569_145"><p id="1446709650#-apd569_147">In your project directory, create a file named <span class="inline-code" id="1446709650#-apd569_148">docker-compose.yml</span>.</p></li><li class="list-item" id="1446709650#-apd569_146"><p id="1446709650#-apd569_149">Add the following content:</p><div class="detached code-block" id="1446709650#-apd569_150"><pre><code class="language-yaml">version: '3'

services:
  web:
    image: my-node-app
    build: .
    ports:
      - &quot;3000:3000&quot;
    volumes:
      - .:/usr/src/app
    environment:
      - NODE_ENV=development
  client:
    image: node:14
    working_dir: /usr/src/app
    volumes:
      - ./client:/usr/src/app
    command: npm start
    ports:
      - &quot;3001:3001&quot;</code></pre></div></li></ol></section><section><h3 id="1446709650#8-3-running-docker-compose" data-toc="8-3-running-docker-compose#Getting-started-with-docker.md-8-3-running-docker-compose">8.3 Running Docker Compose</h3><ul class="list" id="1446709650#-apd569_151" start="1"><li class="list-item" id="1446709650#-apd569_152"><p id="1446709650#-apd569_154">Start your application:</p><div class="detached code-block" id="1446709650#-apd569_155"><pre><code class="language-bash">docker-compose up</code></pre></div></li><li class="list-item" id="1446709650#-apd569_153"><p id="1446709650#-apd569_156">Stop your application:</p><div class="detached code-block" id="1446709650#-apd569_157"><pre><code class="language-bash">docker-compose down</code></pre></div></li></ul></section></section><section><h2 id="1446709650#chapter-9-docker-networking" data-toc="chapter-9-docker-networking#Getting-started-with-docker.md-chapter-9-docker-networking">Chapter 9: Docker Networking</h2><section><h3 id="1446709650#9-1-introduction-to-docker-networking" data-toc="9-1-introduction-to-docker-networking#Getting-started-with-docker.md-9-1-introduction-to-docker-networking">9.1 Introduction to Docker Networking</h3><p id="1446709650#-apd569_163">Docker provides a networking model to allow containers to communicate with each other and with non-Docker workloads.</p></section><section><h3 id="1446709650#9-2-listing-networks" data-toc="9-2-listing-networks#Getting-started-with-docker.md-9-2-listing-networks">9.2 Listing Networks</h3><ul class="list" id="1446709650#-apd569_164" start="1"><li class="list-item" id="1446709650#-apd569_165"><p id="1446709650#-apd569_166">List all Docker networks:</p><div class="detached code-block" id="1446709650#-apd569_167"><pre><code class="language-bash">docker network ls</code></pre></div></li></ul></section><section><h3 id="1446709650#9-3-creating-a-network" data-toc="9-3-creating-a-network#Getting-started-with-docker.md-9-3-creating-a-network">9.3 Creating a Network</h3><ul class="list" id="1446709650#-apd569_168" start="1"><li class="list-item" id="1446709650#-apd569_169"><p id="1446709650#-apd569_170">Create a custom network:</p><div class="detached code-block" id="1446709650#-apd569_171"><pre><code class="language-bash">docker network create my-network</code></pre></div></li></ul></section><section><h3 id="1446709650#9-4-connecting-containers-to-a-network" data-toc="9-4-connecting-containers-to-a-network#Getting-started-with-docker.md-9-4-connecting-containers-to-a-network">9.4 Connecting Containers to a Network</h3><ul class="list" id="1446709650#-apd569_172" start="1"><li class="list-item" id="1446709650#-apd569_173"><p id="1446709650#-apd569_174">Connect a container to a network:</p><div class="detached code-block" id="1446709650#-apd569_175"><pre><code class="language-bash">docker network connect my-network &lt;container_id&gt;</code></pre></div></li></ul></section><section><h3 id="1446709650#9-5-disconnecting-containers-from-a-network" data-toc="9-5-disconnecting-containers-from-a-network#Getting-started-with-docker.md-9-5-disconnecting-containers-from-a-network">9.5 Disconnecting Containers from a Network</h3><ul class="list" id="1446709650#-apd569_176" start="1"><li class="list-item" id="1446709650#-apd569_177"><p id="1446709650#-apd569_178">Disconnect a container from a network:</p><div class="detached code-block" id="1446709650#-apd569_179"><pre><code class="language-bash">docker network disconnect my-network &lt;container_id&gt;</code></pre></div></li></ul></section></section><section><h2 id="1446709650#chapter-10-docker-swarm" data-toc="chapter-10-docker-swarm#Getting-started-with-docker.md-chapter-10-docker-swarm">Chapter 10: Docker Swarm</h2><section><h3 id="1446709650#10-1-introduction-to-docker-swarm" data-toc="10-1-introduction-to-docker-swarm#Getting-started-with-docker.md-10-1-introduction-to-docker-swarm">10.1 Introduction to Docker Swarm</h3><p id="1446709650#-apd569_186">Docker Swarm is a container orchestration tool that allows you to manage a cluster of Docker nodes.</p></section><section><h3 id="1446709650#10-2-initializing-a-swarm" data-toc="10-2-initializing-a-swarm#Getting-started-with-docker.md-10-2-initializing-a-swarm">10.2 Initializing a Swarm</h3><ul class="list" id="1446709650#-apd569_187" start="1"><li class="list-item" id="1446709650#-apd569_188"><p id="1446709650#-apd569_189">Initialize a swarm:</p><div class="detached code-block" id="1446709650#-apd569_190"><pre><code class="language-bash">docker swarm init</code></pre></div></li></ul></section><section><h3 id="1446709650#10-3-joining-a-swarm" data-toc="10-3-joining-a-swarm#Getting-started-with-docker.md-10-3-joining-a-swarm">10.3 Joining a Swarm</h3><ul class="list" id="1446709650#-apd569_191" start="1"><li class="list-item" id="1446709650#-apd569_192"><p id="1446709650#-apd569_193">Get the join command from the manager node and run it on the worker node:</p><div class="detached code-block" id="1446709650#-apd569_194"><pre><code class="language-bash">docker swarm join --token &lt;token&gt; &lt;manager_ip&gt;:2377</code></pre></div></li></ul></section><section><h3 id="1446709650#10-4-deploying-a-service" data-toc="10-4-deploying-a-service#Getting-started-with-docker.md-10-4-deploying-a-service">10.4 Deploying a Service</h3><ul class="list" id="1446709650#-apd569_195" start="1"><li class="list-item" id="1446709650#-apd569_196"><p id="1446709650#-apd569_197">Deploy a service in the swarm:</p><div class="detached code-block" id="1446709650#-apd569_198"><pre><code class="language-bash">docker service create --name my-web-service -p 3000:3000 my-node-app</code></pre></div></li></ul></section><section><h3 id="1446709650#10-5-listing-services" data-toc="10-5-listing-services#Getting-started-with-docker.md-10-5-listing-services">10.5 Listing Services</h3><ul class="list" id="1446709650#-apd569_199" start="1"><li class="list-item" id="1446709650#-apd569_200"><p id="1446709650#-apd569_201">List all services in the swarm:</p><div class="detached code-block" id="1446709650#-apd569_202"><pre><code class="language-bash">docker service ls</code></pre></div></li></ul></section><section><h3 id="1446709650#10-6-removing-a-service" data-toc="10-6-removing-a-service#Getting-started-with-docker.md-10-6-removing-a-service">10.6 Removing a Service</h3><ul class="list" id="1446709650#-apd569_203" start="1"><li class="list-item" id="1446709650#-apd569_204"><p id="1446709650#-apd569_205">Remove a service:</p><div class="detached code-block" id="1446709650#-apd569_206"><pre><code class="language-bash">docker service rm my-web-service</code></pre></div></li></ul></section></section><section><h2 id="1446709650#chapter-11-docker-best-practices" data-toc="chapter-11-docker-best-practices#Getting-started-with-docker.md-chapter-11-docker-best-practices">Chapter 11: Docker Best Practices</h2><section><h3 id="1446709650#11-1-writing-efficient-dockerfiles" data-toc="11-1-writing-efficient-dockerfiles#Getting-started-with-docker.md-11-1-writing-efficient-dockerfiles">11.1 Writing Efficient Dockerfiles</h3><ul class="list" id="1446709650#-apd569_210" start="1"><li class="list-item" id="1446709650#-apd569_211"><p>Use official images as a base.</p></li><li class="list-item" id="1446709650#-apd569_212"><p>Minimize the number of layers.</p></li><li class="list-item" id="1446709650#-apd569_213"><p>Use multi-stage builds for optimized images.</p></li></ul></section><section><h3 id="1446709650#11-2-managing-secrets" data-toc="11-2-managing-secrets#Getting-started-with-docker.md-11-2-managing-secrets">11.2 Managing Secrets</h3><ul class="list" id="1446709650#-apd569_214" start="1"><li class="list-item" id="1446709650#-apd569_215"><p id="1446709650#-apd569_216">Use Docker secrets to manage sensitive data:</p><div class="detached code-block" id="1446709650#-apd569_217"><pre><code class="language-bash">echo &quot;my_secret_password&quot; | docker secret create my_secret -</code></pre></div></li></ul></section><section><h3 id="1446709650#11-3-security-practices" data-toc="11-3-security-practices#Getting-started-with-docker.md-11-3-security-practices">11.3 Security Practices</h3><ul class="list" id="1446709650#-apd569_218" start="1"><li class="list-item" id="1446709650#-apd569_219"><p>Run containers as a non-root user.</p></li><li class="list-item" id="1446709650#-apd569_220"><p>Keep the host and Docker up to date.</p></li></ul></section></section><section><h2 id="1446709650#chapter-12-advanced-topics" data-toc="chapter-12-advanced-topics#Getting-started-with-docker.md-chapter-12-advanced-topics">Chapter 12: Advanced Topics</h2><section><h3 id="1446709650#12-1-docker-with-kubernetes" data-toc="12-1-docker-with-kubernetes#Getting-started-with-docker.md-12-1-docker-with-kubernetes">12.1 Docker with Kubernetes</h3><ul class="list" id="1446709650#-apd569_223" start="1"><li class="list-item" id="1446709650#-apd569_224"><p>Install and configure Kubernetes.</p></li><li class="list-item" id="1446709650#-apd569_225"><p>Deploy Docker containers using Kubernetes.</p></li></ul></section><section><h3 id="1446709650#12-2-ci-cd-with-docker" data-toc="12-2-ci-cd-with-docker#Getting-started-with-docker.md-12-2-ci-cd-with-docker">12.2 CI/CD with Docker</h3><ul class="list" id="1446709650#-apd569_226" start="1"><li class="list-item" id="1446709650#-apd569_227"><p id="1446709650#-apd569_229">Use Docker in your CI/CD pipeline.</p></li><li class="list-item" id="1446709650#-apd569_228"><p id="1446709650#-apd569_230">Example with Jenkins:</p><div class="detached code-block" id="1446709650#-apd569_231"><pre><code class="language-groovy">pipeline {
    agent any
    stages {
        stage('Build') {
            steps {
                script {
                    dockerImage = docker.build(&quot;my-node-app&quot;)
                }
            }
        }
        stage('Test') {
            steps {
                script {
                    dockerImage.inside {
                        sh 'npm test'
                    }
                }
            }
        }
        stage('Deploy') {
            steps {
                script {
                    dockerImage.push('my-repo/my-node-app')
                }
            }
        }
    }
}</code></pre></div></li></ul></section></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="2101908822">2️⃣ Dockerizing MongoDB</h1><section><h2 id="2101908822#chapter-1-introduction" data-toc="chapter-1-introduction#Dockerizing-MongoDB.md-chapter-1-introduction">Chapter 1: Introduction</h2><p id="2101908822#bptw7f_10">This guide will walk you through the steps of Dockerizing MongoDB, setting up a user with specific credentials, persisting data using Docker volumes, and performing basic CRUD (Create, Read, Update, Delete) operations. We will cover everything from pulling the MongoDB image to running queries.</p></section><section><h2 id="2101908822#chapter-2-setting-up-docker" data-toc="chapter-2-setting-up-docker#Dockerizing-MongoDB.md-chapter-2-setting-up-docker">Chapter 2: Setting Up Docker</h2><section><h3 id="2101908822#2-1-installing-docker-on-windows" data-toc="2-1-installing-docker-on-windows#Dockerizing-MongoDB.md-2-1-installing-docker-on-windows">2.1 Installing Docker on Windows</h3><ol class="list list-decimal" id="2101908822#bptw7f_12" type="1" start="1"><li class="list-item" id="2101908822#bptw7f_13"><p id="2101908822#bptw7f_17">Download Docker Desktop from the Docker website (<a href="https://www.docker.com/products/docker-desktop">https://www.docker.com/products/docker-desktop</a>).</p></li><li class="list-item" id="2101908822#bptw7f_14"><p id="2101908822#bptw7f_19">Run the installer and follow the instructions.</p></li><li class="list-item" id="2101908822#bptw7f_15"><p id="2101908822#bptw7f_20">After installation, start Docker Desktop.</p></li><li class="list-item" id="2101908822#bptw7f_16"><p id="2101908822#bptw7f_21">Verify the installation:</p><div class="detached code-block" id="2101908822#bptw7f_22"><pre><code class="language-bash">docker --version</code></pre></div></li></ol></section></section><section><h2 id="2101908822#chapter-3-dockerizing-mongodb" data-toc="chapter-3-dockerizing-mongodb#Dockerizing-MongoDB.md-chapter-3-dockerizing-mongodb">Chapter 3: Dockerizing MongoDB</h2><section><h3 id="2101908822#3-1-pulling-the-mongodb-image" data-toc="3-1-pulling-the-mongodb-image#Dockerizing-MongoDB.md-3-1-pulling-the-mongodb-image">3.1 Pulling the MongoDB Image</h3><ul class="list" id="2101908822#bptw7f_26" start="1"><li class="list-item" id="2101908822#bptw7f_27"><p id="2101908822#bptw7f_28">Open a command prompt and run the following command to pull the official MongoDB image:</p><div class="detached code-block" id="2101908822#bptw7f_29"><pre><code class="language-bash">docker pull mongo</code></pre></div></li></ul></section><section><h3 id="2101908822#3-2-creating-a-docker-volume" data-toc="3-2-creating-a-docker-volume#Dockerizing-MongoDB.md-3-2-creating-a-docker-volume">3.2 Creating a Docker Volume</h3><ul class="list" id="2101908822#bptw7f_30" start="1"><li class="list-item" id="2101908822#bptw7f_31"><p id="2101908822#bptw7f_32">Create a volume to persist MongoDB data:</p><div class="detached code-block" id="2101908822#bptw7f_33"><pre><code class="language-bash">docker volume create mongodb-data</code></pre></div></li></ul></section><section><h3 id="2101908822#3-3-running-mongodb-container-with-authentication-and-persistent-storage" data-toc="3-3-running-mongodb-container-with-authentication-and-persistent-storage#Dockerizing-MongoDB.md-3-3-running-mongodb-container-with-authentication-and-persistent-storage">3.3 Running MongoDB Container with Authentication and Persistent Storage</h3><ul class="list" id="2101908822#bptw7f_34" start="1"><li class="list-item" id="2101908822#bptw7f_35"><p id="2101908822#bptw7f_37">Run the MongoDB container with environment variables to set the username and password, and use the volume for data persistence:</p><div class="detached code-block" id="2101908822#bptw7f_38"><pre><code class="language-bash">docker run --name mongodb_container -d -p 27017:27017 -e MONGO_INITDB_ROOT_USERNAME=admin -e MONGO_INITDB_ROOT_PASSWORD=pass -v mongodb-data:/data/db mongo</code></pre></div></li><li class="list-item" id="2101908822#bptw7f_36"><p id="2101908822#bptw7f_39">Verify the container is running:</p><div class="detached code-block" id="2101908822#bptw7f_40"><pre><code class="language-bash">docker ps</code></pre></div></li></ul></section></section><section><h2 id="2101908822#chapter-4-connecting-to-mongodb" data-toc="chapter-4-connecting-to-mongodb#Dockerizing-MongoDB.md-chapter-4-connecting-to-mongodb">Chapter 4: Connecting to MongoDB</h2><section><h3 id="2101908822#4-1-using-mongodb-shell" data-toc="4-1-using-mongodb-shell#Dockerizing-MongoDB.md-4-1-using-mongodb-shell">4.1 Using MongoDB Shell</h3><p id="2101908822#bptw7f_42">You have two options to connect to MongoDB shell:</p><section><h4 id="2101908822#option-1-direct-command" data-toc="option-1-direct-command#Dockerizing-MongoDB.md-option-1-direct-command">Option 1: Direct Command</h4><ul class="list" id="2101908822#bptw7f_45" start="1"><li class="list-item" id="2101908822#bptw7f_46"><p id="2101908822#bptw7f_47">Start the MongoDB shell directly:</p><div class="detached code-block" id="2101908822#bptw7f_48"><pre><code class="language-bash">docker exec -it mongodb_container bash -c 'mongosh -u admin -p pass --authenticationDatabase admin'</code></pre></div></li></ul></section><section><h4 id="2101908822#option-2-entering-the-container-first" data-toc="option-2-entering-the-container-first#Dockerizing-MongoDB.md-option-2-entering-the-container-first">Option 2: Entering the Container First</h4><ol class="list list-decimal" id="2101908822#bptw7f_49" type="1" start="1"><li class="list-item" id="2101908822#bptw7f_50"><p id="2101908822#bptw7f_54">Start a bash shell inside the running MongoDB container:</p><div class="detached code-block" id="2101908822#bptw7f_55"><pre><code class="language-bash">docker exec -it mongodb_container /bin/bash</code></pre></div></li><li class="list-item" id="2101908822#bptw7f_51"><p id="2101908822#bptw7f_56">Once inside the container, start the MongoDB shell:</p><div class="detached code-block" id="2101908822#bptw7f_57"><pre><code class="language-bash">mongosh -u admin -p pass --authenticationDatabase admin</code></pre></div></li><li class="list-item" id="2101908822#bptw7f_52"><p id="2101908822#bptw7f_58">You should now be in the MongoDB shell:</p><div class="detached code-block" id="2101908822#bptw7f_59"><pre><code class="language-bash">&gt;</code></pre></div></li><li class="list-item" id="2101908822#bptw7f_53"><p id="2101908822#bptw7f_60">List all databases:</p><div class="detached code-block" id="2101908822#bptw7f_61"><pre><code class="language-bash">&gt; show databases</code></pre></div></li></ol></section></section></section><section><h2 id="2101908822#chapter-5-crud-operations" data-toc="chapter-5-crud-operations#Dockerizing-MongoDB.md-chapter-5-crud-operations">Chapter 5: CRUD Operations</h2><section><h3 id="2101908822#5-1-creating-a-database-and-collection" data-toc="5-1-creating-a-database-and-collection#Dockerizing-MongoDB.md-5-1-creating-a-database-and-collection">5.1 Creating a Database and Collection</h3><ol class="list list-decimal" id="2101908822#bptw7f_67" type="1" start="1"><li class="list-item" id="2101908822#bptw7f_68"><p id="2101908822#bptw7f_70">Create a new database called <span class="inline-code" id="2101908822#bptw7f_72">mydatabase</span>:</p><div class="detached code-block" id="2101908822#bptw7f_71"><pre><code class="language-bash">use mydatabase</code></pre></div></li><li class="list-item" id="2101908822#bptw7f_69"><p id="2101908822#bptw7f_73">Create a new collection called <span class="inline-code" id="2101908822#bptw7f_75">mycollection</span>:</p><div class="detached code-block" id="2101908822#bptw7f_74"><pre><code class="language-bash">db.createCollection(&quot;mycollection&quot;)</code></pre></div></li></ol></section><section><h3 id="2101908822#5-2-create-insert-documents" data-toc="5-2-create-insert-documents#Dockerizing-MongoDB.md-5-2-create-insert-documents">5.2 Create (Insert) Documents</h3><ol class="list list-decimal" id="2101908822#bptw7f_76" type="1" start="1"><li class="list-item" id="2101908822#bptw7f_77"><p id="2101908822#bptw7f_79">Insert a single document into <span class="inline-code" id="2101908822#bptw7f_81">mycollection</span>:</p><div class="detached code-block" id="2101908822#bptw7f_80"><pre><code class="language-bash">db.mycollection.insertOne({ name: &quot;John Doe&quot;, age: 30, occupation: &quot;Engineer&quot; })</code></pre></div></li><li class="list-item" id="2101908822#bptw7f_78"><p id="2101908822#bptw7f_82">Insert multiple documents:</p><div class="detached code-block" id="2101908822#bptw7f_83"><pre><code class="language-bash">db.mycollection.insertMany([
  { name: &quot;Jane Doe&quot;, age: 25, occupation: &quot;Teacher&quot; },
  { name: &quot;Steve Smith&quot;, age: 40, occupation: &quot;Chef&quot; }
])</code></pre></div></li></ol></section><section><h3 id="2101908822#5-3-read-query-documents" data-toc="5-3-read-query-documents#Dockerizing-MongoDB.md-5-3-read-query-documents">5.3 Read (Query) Documents</h3><ol class="list list-decimal" id="2101908822#bptw7f_84" type="1" start="1"><li class="list-item" id="2101908822#bptw7f_85"><p id="2101908822#bptw7f_88">Find one document:</p><div class="detached code-block" id="2101908822#bptw7f_89"><pre><code class="language-bash">db.mycollection.findOne({ name: &quot;John Doe&quot; })</code></pre></div></li><li class="list-item" id="2101908822#bptw7f_86"><p id="2101908822#bptw7f_90">Find all documents:</p><div class="detached code-block" id="2101908822#bptw7f_91"><pre><code class="language-bash">db.mycollection.find()</code></pre></div></li><li class="list-item" id="2101908822#bptw7f_87"><p id="2101908822#bptw7f_92">Find documents with a condition:</p><div class="detached code-block" id="2101908822#bptw7f_93"><pre><code class="language-bash">db.mycollection.find({ age: { $gt: 30 } })</code></pre></div></li></ol></section><section><h3 id="2101908822#5-4-update-documents" data-toc="5-4-update-documents#Dockerizing-MongoDB.md-5-4-update-documents">5.4 Update Documents</h3><ol class="list list-decimal" id="2101908822#bptw7f_94" type="1" start="1"><li class="list-item" id="2101908822#bptw7f_95"><p id="2101908822#bptw7f_97">Update a single document:</p><div class="detached code-block" id="2101908822#bptw7f_98"><pre><code class="language-bash">db.mycollection.updateOne({ name: &quot;John Doe&quot; }, { $set: { age: 31 } })</code></pre></div></li><li class="list-item" id="2101908822#bptw7f_96"><p id="2101908822#bptw7f_99">Update multiple documents:</p><div class="detached code-block" id="2101908822#bptw7f_100"><pre><code class="language-bash">db.mycollection.updateMany({ occupation: &quot;Chef&quot; }, { $set: { occupation: &quot;Head Chef&quot; } })</code></pre></div></li></ol></section><section><h3 id="2101908822#5-5-delete-documents" data-toc="5-5-delete-documents#Dockerizing-MongoDB.md-5-5-delete-documents">5.5 Delete Documents</h3><ol class="list list-decimal" id="2101908822#bptw7f_101" type="1" start="1"><li class="list-item" id="2101908822#bptw7f_102"><p id="2101908822#bptw7f_104">Delete a single document:</p><div class="detached code-block" id="2101908822#bptw7f_105"><pre><code class="language-bash">db.mycollection.deleteOne({ name: &quot;John Doe&quot; })</code></pre></div></li><li class="list-item" id="2101908822#bptw7f_103"><p id="2101908822#bptw7f_106">Delete multiple documents:</p><div class="detached code-block" id="2101908822#bptw7f_107"><pre><code class="language-bash">db.mycollection.deleteMany({ age: { $lt: 30 } })</code></pre></div></li></ol></section></section><section><h2 id="2101908822#chapter-6-accessing-mongodb-from-an-application" data-toc="chapter-6-accessing-mongodb-from-an-application#Dockerizing-MongoDB.md-chapter-6-accessing-mongodb-from-an-application">Chapter 6: Accessing MongoDB from an Application</h2><section><h3 id="2101908822#6-1-using-mongodb-with-node-js" data-toc="6-1-using-mongodb-with-node-js#Dockerizing-MongoDB.md-6-1-using-mongodb-with-node-js">6.1 Using MongoDB with Node.js</h3><ol class="list list-decimal" id="2101908822#bptw7f_109" type="1" start="1"><li class="list-item" id="2101908822#bptw7f_110"><p id="2101908822#bptw7f_116">Install Node.js from the official website (<a href="https://nodejs.org/">https://nodejs.org/</a>).</p></li><li class="list-item" id="2101908822#bptw7f_111"><p id="2101908822#bptw7f_118">Create a new project directory and navigate into it:</p><div class="detached code-block" id="2101908822#bptw7f_119"><pre><code class="language-bash">mkdir my-mongo-app
cd my-mongo-app</code></pre></div></li><li class="list-item" id="2101908822#bptw7f_112"><p id="2101908822#bptw7f_120">Initialize a new Node.js project:</p><div class="detached code-block" id="2101908822#bptw7f_121"><pre><code class="language-bash">npm init -y</code></pre></div></li><li class="list-item" id="2101908822#bptw7f_113"><p id="2101908822#bptw7f_122">Install the MongoDB driver:</p><div class="detached code-block" id="2101908822#bptw7f_123"><pre><code class="language-bash">npm install mongodb</code></pre></div></li><li class="list-item" id="2101908822#bptw7f_114"><p id="2101908822#bptw7f_124">Create an <span class="inline-code" id="2101908822#bptw7f_126">index.js</span> file and add the following code:</p><div class="detached code-block" id="2101908822#bptw7f_125"><pre><code class="language-javascript">const { MongoClient } = require('mongodb');

async function main() {
  const uri = &quot;mongodb://admin:pass@localhost:27017/?authSource=admin&quot;;
  const client = new MongoClient(uri);

  try {
    await client.connect();

    const database = client.db('mydatabase');
    const collection = database.collection('mycollection');

    // Insert a document
    const insertResult = await collection.insertOne({ name: &quot;Alice&quot;, age: 28, occupation: &quot;Designer&quot; });
    console.log('Inserted document:', insertResult.insertedId);

    // Find a document
    const findResult = await collection.findOne({ name: &quot;Alice&quot; });
    console.log('Found document:', findResult);

    // Update a document
    const updateResult = await collection.updateOne({ name: &quot;Alice&quot; }, { $set: { age: 29 } });
    console.log('Updated document:', updateResult.modifiedCount);

    // Delete a document
    const deleteResult = await collection.deleteOne({ name: &quot;Alice&quot; });
    console.log('Deleted document:', deleteResult.deletedCount);
  } finally {
    await client.close();
  }
}

main().catch(console.error);</code></pre></div></li><li class="list-item" id="2101908822#bptw7f_115"><p id="2101908822#bptw7f_127">Run the application:</p><div class="detached code-block" id="2101908822#bptw7f_128"><pre><code class="language-bash">node index.js</code></pre></div></li></ol></section></section><section><h2 id="2101908822#chapter-7-cleaning-up" data-toc="chapter-7-cleaning-up#Dockerizing-MongoDB.md-chapter-7-cleaning-up">Chapter 7: Cleaning Up</h2><section><h3 id="2101908822#7-1-stopping-and-removing-the-mongodb-container" data-toc="7-1-stopping-and-removing-the-mongodb-container#Dockerizing-MongoDB.md-7-1-stopping-and-removing-the-mongodb-container">7.1 Stopping and Removing the MongoDB Container</h3><ul class="list" id="2101908822#bptw7f_132" start="1"><li class="list-item" id="2101908822#bptw7f_133"><p id="2101908822#bptw7f_135">Stop the container:</p><div class="detached code-block" id="2101908822#bptw7f_136"><pre><code class="language-bash">docker stop mongodb_container</code></pre></div></li><li class="list-item" id="2101908822#bptw7f_134"><p id="2101908822#bptw7f_137">Remove the container:</p><div class="detached code-block" id="2101908822#bptw7f_138"><pre><code class="language-bash">docker rm mongodb_container</code></pre></div></li></ul></section><section><h3 id="2101908822#7-2-removing-the-mongodb-image" data-toc="7-2-removing-the-mongodb-image#Dockerizing-MongoDB.md-7-2-removing-the-mongodb-image">7.2 Removing the MongoDB Image</h3><ul class="list" id="2101908822#bptw7f_139" start="1"><li class="list-item" id="2101908822#bptw7f_140"><p id="2101908822#bptw7f_141">Remove the MongoDB image:</p><div class="detached code-block" id="2101908822#bptw7f_142"><pre><code class="language-bash">docker rmi mongo</code></pre></div></li></ul></section><section><h3 id="2101908822#7-3-removing-the-docker-volume" data-toc="7-3-removing-the-docker-volume#Dockerizing-MongoDB.md-7-3-removing-the-docker-volume">7.3 Removing the Docker Volume</h3><ul class="list" id="2101908822#bptw7f_143" start="1"><li class="list-item" id="2101908822#bptw7f_144"><p id="2101908822#bptw7f_145">Remove the Docker volume:</p><div class="detached code-block" id="2101908822#bptw7f_146"><pre><code class="language-bash">docker volume rm mongodb-data</code></pre></div></li></ul></section></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="-360695856">3️⃣ Dockerizing PostgreSQL</h1><section><h2 id="-360695856#chapter-1-introduction" data-toc="chapter-1-introduction#Dockerizing-PostgreSQL.md-chapter-1-introduction">Chapter 1: Introduction</h2><p id="-360695856#z324mvt_10">This guide will walk you through the steps of Dockerizing PostgreSQL, setting up a user with specific credentials, persisting data using Docker volumes, and performing basic CRUD (Create, Read, Update, Delete) operations. We will cover everything from pulling the PostgreSQL image to running queries.</p></section><section><h2 id="-360695856#chapter-2-setting-up-docker" data-toc="chapter-2-setting-up-docker#Dockerizing-PostgreSQL.md-chapter-2-setting-up-docker">Chapter 2: Setting Up Docker</h2><section><h3 id="-360695856#2-1-installing-docker-on-windows" data-toc="2-1-installing-docker-on-windows#Dockerizing-PostgreSQL.md-2-1-installing-docker-on-windows">2.1 Installing Docker on Windows</h3><ol class="list list-decimal" id="-360695856#z324mvt_12" type="1" start="1"><li class="list-item" id="-360695856#z324mvt_13"><p id="-360695856#z324mvt_17">Download Docker Desktop from the Docker website (<a href="https://www.docker.com/products/docker-desktop">https://www.docker.com/products/docker-desktop</a>).</p></li><li class="list-item" id="-360695856#z324mvt_14"><p id="-360695856#z324mvt_19">Run the installer and follow the instructions.</p></li><li class="list-item" id="-360695856#z324mvt_15"><p id="-360695856#z324mvt_20">After installation, start Docker Desktop.</p></li><li class="list-item" id="-360695856#z324mvt_16"><p id="-360695856#z324mvt_21">Verify the installation:</p><div class="detached code-block" id="-360695856#z324mvt_22"><pre><code class="language-bash">docker --version</code></pre></div></li></ol></section></section><section><h2 id="-360695856#chapter-3-dockerizing-postgresql" data-toc="chapter-3-dockerizing-postgresql#Dockerizing-PostgreSQL.md-chapter-3-dockerizing-postgresql">Chapter 3: Dockerizing PostgreSQL</h2><section><h3 id="-360695856#3-1-pulling-the-postgresql-image" data-toc="3-1-pulling-the-postgresql-image#Dockerizing-PostgreSQL.md-3-1-pulling-the-postgresql-image">3.1 Pulling the PostgreSQL Image</h3><ul class="list" id="-360695856#z324mvt_26" start="1"><li class="list-item" id="-360695856#z324mvt_27"><p id="-360695856#z324mvt_28">Open a command prompt and run the following command to pull the official PostgreSQL image:</p><div class="detached code-block" id="-360695856#z324mvt_29"><pre><code class="language-bash">docker pull postgres</code></pre></div></li></ul></section><section><h3 id="-360695856#3-2-creating-a-docker-volume" data-toc="3-2-creating-a-docker-volume#Dockerizing-PostgreSQL.md-3-2-creating-a-docker-volume">3.2 Creating a Docker Volume</h3><ul class="list" id="-360695856#z324mvt_30" start="1"><li class="list-item" id="-360695856#z324mvt_31"><p id="-360695856#z324mvt_32">Create a volume to persist PostgreSQL data:</p><div class="detached code-block" id="-360695856#z324mvt_33"><pre><code class="language-bash">docker volume create postgres-data</code></pre></div></li></ul></section><section><h3 id="-360695856#3-3-running-postgresql-container-with-authentication-and-persistent-storage" data-toc="3-3-running-postgresql-container-with-authentication-and-persistent-storage#Dockerizing-PostgreSQL.md-3-3-running-postgresql-container-with-authentication-and-persistent-storage">3.3 Running PostgreSQL Container with Authentication and Persistent Storage</h3><ul class="list" id="-360695856#z324mvt_34" start="1"><li class="list-item" id="-360695856#z324mvt_35"><p id="-360695856#z324mvt_37">Run the PostgreSQL container with environment variables to set the username and password, and use the volume for data persistence:</p><div class="detached code-block" id="-360695856#z324mvt_38"><pre><code class="language-bash">docker run --name postgres_container -d -p 5432:5432 -e POSTGRES_USER=admin -e POSTGRES_PASSWORD=pass -v postgres-data:/var/lib/postgresql/data postgres</code></pre></div></li><li class="list-item" id="-360695856#z324mvt_36"><p id="-360695856#z324mvt_39">Verify the container is running:</p><div class="detached code-block" id="-360695856#z324mvt_40"><pre><code class="language-bash">docker ps</code></pre></div></li></ul></section></section><section><h2 id="-360695856#chapter-4-connecting-to-postgresql" data-toc="chapter-4-connecting-to-postgresql#Dockerizing-PostgreSQL.md-chapter-4-connecting-to-postgresql">Chapter 4: Connecting to PostgreSQL</h2><section><h3 id="-360695856#4-1-using-psql-shell" data-toc="4-1-using-psql-shell#Dockerizing-PostgreSQL.md-4-1-using-psql-shell">4.1 Using psql Shell</h3><p id="-360695856#z324mvt_42">You have two options to connect to the PostgreSQL shell:</p><section><h4 id="-360695856#option-1-direct-command" data-toc="option-1-direct-command#Dockerizing-PostgreSQL.md-option-1-direct-command">Option 1: Direct Command</h4><ul class="list" id="-360695856#z324mvt_45" start="1"><li class="list-item" id="-360695856#z324mvt_46"><p id="-360695856#z324mvt_47">Start the PostgreSQL shell directly:</p><div class="detached code-block" id="-360695856#z324mvt_48"><pre><code class="language-bash">docker exec -it postgres_container psql -U admin</code></pre></div></li></ul></section><section><h4 id="-360695856#option-2-entering-the-container-first" data-toc="option-2-entering-the-container-first#Dockerizing-PostgreSQL.md-option-2-entering-the-container-first">Option 2: Entering the Container First</h4><ol class="list list-decimal" id="-360695856#z324mvt_49" type="1" start="1"><li class="list-item" id="-360695856#z324mvt_51"><p id="-360695856#z324mvt_56">Start a bash shell inside the running PostgreSQL container:</p><div class="detached code-block" id="-360695856#z324mvt_57"><pre><code class="language-bash">docker exec -it postgres_container /bin/bash</code></pre></div></li><li class="list-item" id="-360695856#z324mvt_52"><p id="-360695856#z324mvt_58">Once inside the container, start the PostgreSQL shell:</p><div class="detached code-block" id="-360695856#z324mvt_59"><pre><code class="language-bash">psql -U admin</code></pre></div></li><li class="list-item" id="-360695856#z324mvt_53"><p id="-360695856#z324mvt_60">You should now be in the PostgreSQL shell:</p><div class="detached code-block" id="-360695856#z324mvt_61"><pre><code class="language-bash">admin=#</code></pre></div></li><li class="list-item" id="-360695856#z324mvt_54"><p id="-360695856#z324mvt_62">In the PostgreSQL shell (psql), you can list all databases using the following command:</p><ul class="list" id="-360695856#z324mvt_63" start="1"><li class="list-item" id="-360695856#z324mvt_67"><p>List All Databases</p></li></ul><div class="detached code-block" id="-360695856#z324mvt_64"><pre><code class="language-bash">\l</code></pre></div><ul class="list" id="-360695856#z324mvt_65" start="1"><li class="list-item" id="-360695856#z324mvt_68"><p>or</p></li></ul><div class="detached code-block" id="-360695856#z324mvt_66"><pre><code class="language-bash">\list</code></pre></div></li><li class="list-item" id="-360695856#z324mvt_55"><p id="-360695856#z324mvt_69">Additional Useful Commands</p></li></ol><ul class="list" id="-360695856#z324mvt_50" start="1"><li class="list-item" id="-360695856#z324mvt_70"><p id="-360695856#z324mvt_74">List all tables in the current database:</p><div class="detached code-block" id="-360695856#z324mvt_75"><pre><code class="language-bash">\dt</code></pre></div></li><li class="list-item" id="-360695856#z324mvt_71"><p id="-360695856#z324mvt_76">List all schemas in the current database:</p><div class="detached code-block" id="-360695856#z324mvt_77"><pre><code class="language-bash">\dn</code></pre></div></li><li class="list-item" id="-360695856#z324mvt_72"><p id="-360695856#z324mvt_78">List all users:</p><div class="detached code-block" id="-360695856#z324mvt_79"><pre><code class="language-bash">\du</code></pre></div></li><li class="list-item" id="-360695856#z324mvt_73"><p id="-360695856#z324mvt_80">List all indexes:</p><div class="detached code-block" id="-360695856#z324mvt_81"><pre><code class="language-bash">\di</code></pre></div></li></ul></section></section></section><section><h2 id="-360695856#chapter-5-crud-operations" data-toc="chapter-5-crud-operations#Dockerizing-PostgreSQL.md-chapter-5-crud-operations">Chapter 5: CRUD Operations</h2><section><h3 id="-360695856#5-1-creating-a-database-and-table" data-toc="5-1-creating-a-database-and-table#Dockerizing-PostgreSQL.md-5-1-creating-a-database-and-table">5.1 Creating a Database and Table</h3><ol class="list list-decimal" id="-360695856#z324mvt_87" type="1" start="1"><li class="list-item" id="-360695856#z324mvt_88"><p id="-360695856#z324mvt_91">Create a new database called <span class="inline-code" id="-360695856#z324mvt_93">mydatabase</span>:</p><div class="detached code-block" id="-360695856#z324mvt_92"><pre><code class="language-sql">CREATE DATABASE mydatabase;</code></pre></div></li><li class="list-item" id="-360695856#z324mvt_89"><p id="-360695856#z324mvt_94">Connect to the new database:</p><div class="detached code-block" id="-360695856#z324mvt_95"><pre><code class="language-sql">\c mydatabase</code></pre></div></li><li class="list-item" id="-360695856#z324mvt_90"><p id="-360695856#z324mvt_96">Create a new table called <span class="inline-code" id="-360695856#z324mvt_98">mytable</span>:</p><div class="detached code-block" id="-360695856#z324mvt_97"><pre><code class="language-sql">CREATE TABLE mytable (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100),
    age INT,
    occupation VARCHAR(100)
);</code></pre></div></li></ol></section><section><h3 id="-360695856#5-2-create-insert-records" data-toc="5-2-create-insert-records#Dockerizing-PostgreSQL.md-5-2-create-insert-records">5.2 Create (Insert) Records</h3><ol class="list list-decimal" id="-360695856#z324mvt_99" type="1" start="1"><li class="list-item" id="-360695856#z324mvt_100"><p id="-360695856#z324mvt_102">Insert a single record into <span class="inline-code" id="-360695856#z324mvt_104">mytable</span>:</p><div class="detached code-block" id="-360695856#z324mvt_103"><pre><code class="language-sql">INSERT INTO mytable (name, age, occupation) VALUES ('John Doe', 30, 'Engineer');</code></pre></div></li><li class="list-item" id="-360695856#z324mvt_101"><p id="-360695856#z324mvt_105">Insert multiple records:</p><div class="detached code-block" id="-360695856#z324mvt_106"><pre><code class="language-sql">INSERT INTO mytable (name, age, occupation) VALUES 
('Jane Doe', 25, 'Teacher'),
('Steve Smith', 40, 'Chef');</code></pre></div></li></ol></section><section><h3 id="-360695856#5-3-read-query-records" data-toc="5-3-read-query-records#Dockerizing-PostgreSQL.md-5-3-read-query-records">5.3 Read (Query) Records</h3><ol class="list list-decimal" id="-360695856#z324mvt_107" type="1" start="1"><li class="list-item" id="-360695856#z324mvt_108"><p id="-360695856#z324mvt_111">Select one record:</p><div class="detached code-block" id="-360695856#z324mvt_112"><pre><code class="language-sql">SELECT * FROM mytable WHERE name = 'John Doe';</code></pre></div></li><li class="list-item" id="-360695856#z324mvt_109"><p id="-360695856#z324mvt_113">Select all records:</p><div class="detached code-block" id="-360695856#z324mvt_114"><pre><code class="language-sql">SELECT * FROM mytable;</code></pre></div></li><li class="list-item" id="-360695856#z324mvt_110"><p id="-360695856#z324mvt_115">Select records with a condition:</p><div class="detached code-block" id="-360695856#z324mvt_116"><pre><code class="language-sql">SELECT * FROM mytable WHERE age &gt; 30;</code></pre></div></li></ol></section><section><h3 id="-360695856#5-4-update-records" data-toc="5-4-update-records#Dockerizing-PostgreSQL.md-5-4-update-records">5.4 Update Records</h3><ol class="list list-decimal" id="-360695856#z324mvt_117" type="1" start="1"><li class="list-item" id="-360695856#z324mvt_118"><p id="-360695856#z324mvt_120">Update a single record:</p><div class="detached code-block" id="-360695856#z324mvt_121"><pre><code class="language-sql">UPDATE mytable SET age = 31 WHERE name = 'John Doe';</code></pre></div></li><li class="list-item" id="-360695856#z324mvt_119"><p id="-360695856#z324mvt_122">Update multiple records:</p><div class="detached code-block" id="-360695856#z324mvt_123"><pre><code class="language-sql">UPDATE mytable SET occupation = 'Head Chef' WHERE occupation = 'Chef';</code></pre></div></li></ol></section><section><h3 id="-360695856#5-5-delete-records" data-toc="5-5-delete-records#Dockerizing-PostgreSQL.md-5-5-delete-records">5.5 Delete Records</h3><ol class="list list-decimal" id="-360695856#z324mvt_124" type="1" start="1"><li class="list-item" id="-360695856#z324mvt_125"><p id="-360695856#z324mvt_127">Delete a single record:</p><div class="detached code-block" id="-360695856#z324mvt_128"><pre><code class="language-sql">DELETE FROM mytable WHERE name = 'John Doe';</code></pre></div></li><li class="list-item" id="-360695856#z324mvt_126"><p id="-360695856#z324mvt_129">Delete multiple records:</p><div class="detached code-block" id="-360695856#z324mvt_130"><pre><code class="language-sql">DELETE FROM mytable WHERE age &lt; 30;</code></pre></div></li></ol></section></section><section><h2 id="-360695856#chapter-6-accessing-postgresql-from-an-application" data-toc="chapter-6-accessing-postgresql-from-an-application#Dockerizing-PostgreSQL.md-chapter-6-accessing-postgresql-from-an-application">Chapter 6: Accessing PostgreSQL from an Application</h2><section><h3 id="-360695856#6-1-using-postgresql-with-node-js" data-toc="6-1-using-postgresql-with-node-js#Dockerizing-PostgreSQL.md-6-1-using-postgresql-with-node-js">6.1 Using PostgreSQL with Node.js</h3><ol class="list list-decimal" id="-360695856#z324mvt_132" type="1" start="1"><li class="list-item" id="-360695856#z324mvt_133"><p id="-360695856#z324mvt_139">Install Node.js from the official website (<a href="https://nodejs.org/">https://nodejs.org/</a>).</p></li><li class="list-item" id="-360695856#z324mvt_134"><p id="-360695856#z324mvt_141">Create a new project directory and navigate into it:</p><div class="detached code-block" id="-360695856#z324mvt_142"><pre><code class="language-bash">mkdir my-postgres-app
cd my-postgres-app</code></pre></div></li><li class="list-item" id="-360695856#z324mvt_135"><p id="-360695856#z324mvt_143">Initialize a new Node.js project:</p><div class="detached code-block" id="-360695856#z324mvt_144"><pre><code class="language-bash">npm init -y</code></pre></div></li><li class="list-item" id="-360695856#z324mvt_136"><p id="-360695856#z324mvt_145">Install the <span class="inline-code" id="-360695856#z324mvt_147">pg</span> package:</p><div class="detached code-block" id="-360695856#z324mvt_146"><pre><code class="language-bash">npm install pg</code></pre></div></li><li class="list-item" id="-360695856#z324mvt_137"><p id="-360695856#z324mvt_148">Create an <span class="inline-code" id="-360695856#z324mvt_150">index.js</span> file and add the following code:</p><div class="detached code-block" id="-360695856#z324mvt_149"><pre><code class="language-javascript">const { Client } = require('pg');

async function main() {
  const client = new Client({
    user: 'admin',
    host: 'localhost',
    database: 'mydatabase',
    password: 'pass',
    port: 5432,
  });

  await client.connect();

  try {
    // Insert a record
    const insertResult = await client.query(&quot;INSERT INTO mytable (name, age, occupation) VALUES ('Alice', 28, 'Designer') RETURNING id&quot;);
    console.log('Inserted record ID:', insertResult.rows[0].id);

    // Select a record
    const selectResult = await client.query(&quot;SELECT * FROM mytable WHERE name = 'Alice'&quot;);
    console.log('Selected record:', selectResult.rows[0]);

    // Update a record
    const updateResult = await client.query(&quot;UPDATE mytable SET age = 29 WHERE name = 'Alice'&quot;);
    console.log('Updated record count:', updateResult.rowCount);

    // Delete a record
    const deleteResult = await client.query(&quot;DELETE FROM mytable WHERE name = 'Alice'&quot;);
    console.log('Deleted record count:', deleteResult.rowCount);
  } finally {
    await client.end();
  }
}

main().catch(console.error);</code></pre></div></li><li class="list-item" id="-360695856#z324mvt_138"><p id="-360695856#z324mvt_151">Run the application:</p><div class="detached code-block" id="-360695856#z324mvt_152"><pre><code class="language-bash">node index.js</code></pre></div></li></ol></section></section><section><h2 id="-360695856#chapter-7-cleaning-up" data-toc="chapter-7-cleaning-up#Dockerizing-PostgreSQL.md-chapter-7-cleaning-up">Chapter 7: Cleaning Up</h2><section><h3 id="-360695856#7-1-stopping-and-removing-the-postgresql-container" data-toc="7-1-stopping-and-removing-the-postgresql-container#Dockerizing-PostgreSQL.md-7-1-stopping-and-removing-the-postgresql-container">7.1 Stopping and Removing the PostgreSQL Container</h3><ul class="list" id="-360695856#z324mvt_156" start="1"><li class="list-item" id="-360695856#z324mvt_157"><p id="-360695856#z324mvt_159">Stop the container:</p><div class="detached code-block" id="-360695856#z324mvt_160"><pre><code class="language-bash">docker stop postgres_container</code></pre></div></li><li class="list-item" id="-360695856#z324mvt_158"><p id="-360695856#z324mvt_161">Remove the container:</p><div class="detached code-block" id="-360695856#z324mvt_162"><pre><code class="language-bash">docker rm postgres_container</code></pre></div></li></ul></section><section><h3 id="-360695856#7-2-removing-the-postgresql-image" data-toc="7-2-removing-the-postgresql-image#Dockerizing-PostgreSQL.md-7-2-removing-the-postgresql-image">7.2 Removing the PostgreSQL Image</h3><ul class="list" id="-360695856#z324mvt_163" start="1"><li class="list-item" id="-360695856#z324mvt_164"><p id="-360695856#z324mvt_165">Remove the PostgreSQL image:</p><div class="detached code-block" id="-360695856#z324mvt_166"><pre><code class="language-bash">docker rmi postgres</code></pre></div></li></ul></section><section><h3 id="-360695856#7-3-removing-the-docker-volume" data-toc="7-3-removing-the-docker-volume#Dockerizing-PostgreSQL.md-7-3-removing-the-docker-volume">7.3 Removing the Docker Volume</h3><ul class="list" id="-360695856#z324mvt_167" start="1"><li class="list-item" id="-360695856#z324mvt_169"><p id="-360695856#z324mvt_170">Remove the Docker volume:</p><div class="detached code-block" id="-360695856#z324mvt_171"><pre><code class="language-bash">docker volume rm postgres-data</code></pre></div></li></ul></section></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="1933182566">4️⃣ Dockerizing MySQL</h1><section><h2 id="1933182566#chapter-1-introduction" data-toc="chapter-1-introduction#Dockerizing-MySQL.md-chapter-1-introduction">Chapter 1: Introduction</h2><p id="1933182566#-kghlfp_10">This guide will walk you through the steps of Dockerizing MySQL, setting up a user with specific credentials, persisting data using Docker volumes, and performing basic CRUD (Create, Read, Update, Delete) operations. We will cover everything from pulling the MySQL image to running queries.</p></section><section><h2 id="1933182566#chapter-2-setting-up-docker" data-toc="chapter-2-setting-up-docker#Dockerizing-MySQL.md-chapter-2-setting-up-docker">Chapter 2: Setting Up Docker</h2><section><h3 id="1933182566#2-1-installing-docker-on-windows" data-toc="2-1-installing-docker-on-windows#Dockerizing-MySQL.md-2-1-installing-docker-on-windows">2.1 Installing Docker on Windows</h3><ol class="list list-decimal" id="1933182566#-kghlfp_12" type="1" start="1"><li class="list-item" id="1933182566#-kghlfp_13"><p id="1933182566#-kghlfp_17">Download Docker Desktop from the Docker website (<a href="https://www.docker.com/products/docker-desktop">https://www.docker.com/products/docker-desktop</a>).</p></li><li class="list-item" id="1933182566#-kghlfp_14"><p id="1933182566#-kghlfp_19">Run the installer and follow the instructions.</p></li><li class="list-item" id="1933182566#-kghlfp_15"><p id="1933182566#-kghlfp_20">After installation, start Docker Desktop.</p></li><li class="list-item" id="1933182566#-kghlfp_16"><p id="1933182566#-kghlfp_21">Verify the installation:</p><div class="detached code-block" id="1933182566#-kghlfp_22"><pre><code class="language-bash">docker --version</code></pre></div></li></ol></section></section><section><h2 id="1933182566#chapter-3-dockerizing-mysql" data-toc="chapter-3-dockerizing-mysql#Dockerizing-MySQL.md-chapter-3-dockerizing-mysql">Chapter 3: Dockerizing MySQL</h2><section><h3 id="1933182566#3-1-pulling-the-mysql-image" data-toc="3-1-pulling-the-mysql-image#Dockerizing-MySQL.md-3-1-pulling-the-mysql-image">3.1 Pulling the MySQL Image</h3><ul class="list" id="1933182566#-kghlfp_26" start="1"><li class="list-item" id="1933182566#-kghlfp_27"><p id="1933182566#-kghlfp_28">Open a command prompt and run the following command to pull the official MySQL image:</p><div class="detached code-block" id="1933182566#-kghlfp_29"><pre><code class="language-bash">docker pull mysql</code></pre></div></li></ul></section><section><h3 id="1933182566#3-2-creating-a-docker-volume" data-toc="3-2-creating-a-docker-volume#Dockerizing-MySQL.md-3-2-creating-a-docker-volume">3.2 Creating a Docker Volume</h3><ul class="list" id="1933182566#-kghlfp_30" start="1"><li class="list-item" id="1933182566#-kghlfp_31"><p id="1933182566#-kghlfp_32">Create a volume to persist MySQL data:</p><div class="detached code-block" id="1933182566#-kghlfp_33"><pre><code class="language-bash">docker volume create mysql-data</code></pre></div></li></ul></section><section><h3 id="1933182566#3-3-running-mysql-container-with-authentication-and-persistent-storage" data-toc="3-3-running-mysql-container-with-authentication-and-persistent-storage#Dockerizing-MySQL.md-3-3-running-mysql-container-with-authentication-and-persistent-storage">3.3 Running MySQL Container with Authentication and Persistent Storage</h3><ul class="list" id="1933182566#-kghlfp_34" start="1"><li class="list-item" id="1933182566#-kghlfp_35"><p id="1933182566#-kghlfp_37">Run the MySQL container with environment variables to set the username and password, and use the volume for data persistence:</p><div class="detached code-block" id="1933182566#-kghlfp_38"><pre><code class="language-bash">docker run --name mysql_container -d -p 3306:3306 -e MYSQL_ROOT_PASSWORD=pass -e MYSQL_USER=admin -e MYSQL_PASSWORD=pass -e MYSQL_DATABASE=mydatabase -v mysql-data:/var/lib/mysql mysql</code></pre></div></li><li class="list-item" id="1933182566#-kghlfp_36"><p id="1933182566#-kghlfp_39">Verify the container is running:</p><div class="detached code-block" id="1933182566#-kghlfp_40"><pre><code class="language-bash">docker ps</code></pre></div></li></ul></section></section><section><h2 id="1933182566#chapter-4-connecting-to-mysql" data-toc="chapter-4-connecting-to-mysql#Dockerizing-MySQL.md-chapter-4-connecting-to-mysql">Chapter 4: Connecting to MySQL</h2><section><h3 id="1933182566#4-1-using-mysql-shell" data-toc="4-1-using-mysql-shell#Dockerizing-MySQL.md-4-1-using-mysql-shell">4.1 Using MySQL Shell</h3><p id="1933182566#-kghlfp_42">You have two options to connect to the MySQL shell:</p><section><h4 id="1933182566#option-1-direct-command" data-toc="option-1-direct-command#Dockerizing-MySQL.md-option-1-direct-command">Option 1: Direct Command</h4><ul class="list" id="1933182566#-kghlfp_45" start="1"><li class="list-item" id="1933182566#-kghlfp_46"><p id="1933182566#-kghlfp_48">Start the MySQL shell directly:</p><div class="detached code-block" id="1933182566#-kghlfp_49"><pre><code class="language-bash">docker exec -it mysql_container mysql -u admin -p</code></pre></div></li><li class="list-item" id="1933182566#-kghlfp_47"><p id="1933182566#-kghlfp_50">you will be prompted to Enter password:</p><div class="detached code-block" id="1933182566#-kghlfp_51"><pre><code class="language-bash">Enter password: pass</code></pre></div></li></ul></section><section><h4 id="1933182566#option-2-entering-the-container-first" data-toc="option-2-entering-the-container-first#Dockerizing-MySQL.md-option-2-entering-the-container-first">Option 2: Entering the Container First</h4><ol class="list list-decimal" id="1933182566#-kghlfp_52" type="1" start="1"><li class="list-item" id="1933182566#-kghlfp_54"><p id="1933182566#-kghlfp_59">Start a bash shell inside the running MySQL container:</p><div class="detached code-block" id="1933182566#-kghlfp_60"><pre><code class="language-bash">docker exec -it mysql_container /bin/bash</code></pre></div></li><li class="list-item" id="1933182566#-kghlfp_55"><p id="1933182566#-kghlfp_61">Once inside the container, start the MySQL shell:</p><div class="detached code-block" id="1933182566#-kghlfp_62"><pre><code class="language-bash">mysql -u admin -p</code></pre></div></li><li class="list-item" id="1933182566#-kghlfp_56"><p id="1933182566#-kghlfp_63">Enter the password when prompted (<span class="inline-code" id="1933182566#-kghlfp_64">pass</span> in this example).</p></li><li class="list-item" id="1933182566#-kghlfp_57"><p id="1933182566#-kghlfp_65">You should now be in the MySQL shell:</p><div class="detached code-block" id="1933182566#-kghlfp_66"><pre><code class="language-sql">mysql&gt;</code></pre></div></li><li class="list-item" id="1933182566#-kghlfp_58"><p id="1933182566#-kghlfp_67">In the MySQL shell, you can list all databases using the following command:</p></li></ol><ul class="list" id="1933182566#-kghlfp_53" start="1"><li class="list-item" id="1933182566#-kghlfp_68"><p id="1933182566#-kghlfp_69">List All Databases:</p><div class="detached code-block" id="1933182566#-kghlfp_70"><pre><code class="language-sql">SHOW DATABASES;</code></pre></div></li></ul></section></section></section><section><h2 id="1933182566#chapter-5-crud-operations" data-toc="chapter-5-crud-operations#Dockerizing-MySQL.md-chapter-5-crud-operations">Chapter 5: CRUD Operations</h2><section><h3 id="1933182566#5-1-creating-a-database-and-table" data-toc="5-1-creating-a-database-and-table#Dockerizing-MySQL.md-5-1-creating-a-database-and-table">5.1 Creating a Database and Table</h3><ol class="list list-decimal" id="1933182566#-kghlfp_77" type="1" start="1"><li class="list-item" id="1933182566#-kghlfp_78"><p id="1933182566#-kghlfp_81">Create a new database called <span class="inline-code" id="1933182566#-kghlfp_83">mydatabase</span>:</p><div class="detached code-block" id="1933182566#-kghlfp_82"><pre><code class="language-sql">CREATE DATABASE mydatabase;</code></pre></div></li><li class="list-item" id="1933182566#-kghlfp_79"><p id="1933182566#-kghlfp_84">Select the new database:</p><div class="detached code-block" id="1933182566#-kghlfp_85"><pre><code class="language-sql">USE mydatabase;</code></pre></div></li><li class="list-item" id="1933182566#-kghlfp_80"><p id="1933182566#-kghlfp_86">Create a new table called <span class="inline-code" id="1933182566#-kghlfp_88">mytable</span>:</p><div class="detached code-block" id="1933182566#-kghlfp_87"><pre><code class="language-sql">CREATE TABLE mytable (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100),
    age INT,
    occupation VARCHAR(100)
);</code></pre></div></li></ol></section><section><h3 id="1933182566#5-2-create-insert-records" data-toc="5-2-create-insert-records#Dockerizing-MySQL.md-5-2-create-insert-records">5.2 Create (Insert) Records</h3><ol class="list list-decimal" id="1933182566#-kghlfp_89" type="1" start="1"><li class="list-item" id="1933182566#-kghlfp_90"><p id="1933182566#-kghlfp_92">Insert a single record into <span class="inline-code" id="1933182566#-kghlfp_94">mytable</span>:</p><div class="detached code-block" id="1933182566#-kghlfp_93"><pre><code class="language-sql">INSERT INTO mytable (name, age, occupation) VALUES ('John Doe', 30, 'Engineer');</code></pre></div></li><li class="list-item" id="1933182566#-kghlfp_91"><p id="1933182566#-kghlfp_95">Insert multiple records:</p><div class="detached code-block" id="1933182566#-kghlfp_96"><pre><code class="language-sql">INSERT INTO mytable (name, age, occupation) VALUES 
('Jane Doe', 25, 'Teacher'),
('Steve Smith', 40, 'Chef');</code></pre></div></li></ol></section><section><h3 id="1933182566#5-3-read-query-records" data-toc="5-3-read-query-records#Dockerizing-MySQL.md-5-3-read-query-records">5.3 Read (Query) Records</h3><ol class="list list-decimal" id="1933182566#-kghlfp_97" type="1" start="1"><li class="list-item" id="1933182566#-kghlfp_98"><p id="1933182566#-kghlfp_101">Select one record:</p><div class="detached code-block" id="1933182566#-kghlfp_102"><pre><code class="language-sql">SELECT * FROM mytable WHERE name = 'John Doe';</code></pre></div></li><li class="list-item" id="1933182566#-kghlfp_99"><p id="1933182566#-kghlfp_103">Select all records:</p><div class="detached code-block" id="1933182566#-kghlfp_104"><pre><code class="language-sql">SELECT * FROM mytable;</code></pre></div></li><li class="list-item" id="1933182566#-kghlfp_100"><p id="1933182566#-kghlfp_105">Select records with a condition:</p><div class="detached code-block" id="1933182566#-kghlfp_106"><pre><code class="language-sql">SELECT * FROM mytable WHERE age &gt; 30;</code></pre></div></li></ol></section><section><h3 id="1933182566#5-4-update-records" data-toc="5-4-update-records#Dockerizing-MySQL.md-5-4-update-records">5.4 Update Records</h3><ol class="list list-decimal" id="1933182566#-kghlfp_107" type="1" start="1"><li class="list-item" id="1933182566#-kghlfp_108"><p id="1933182566#-kghlfp_110">Update a single record:</p><div class="detached code-block" id="1933182566#-kghlfp_111"><pre><code class="language-sql">UPDATE mytable SET age = 31 WHERE name = 'John Doe';</code></pre></div></li><li class="list-item" id="1933182566#-kghlfp_109"><p id="1933182566#-kghlfp_112">Update multiple records:</p><div class="detached code-block" id="1933182566#-kghlfp_113"><pre><code class="language-sql">UPDATE mytable SET occupation = 'Head Chef' WHERE occupation = 'Chef';</code></pre></div></li></ol></section><section><h3 id="1933182566#5-5-delete-records" data-toc="5-5-delete-records#Dockerizing-MySQL.md-5-5-delete-records">5.5 Delete Records</h3><ol class="list list-decimal" id="1933182566#-kghlfp_114" type="1" start="1"><li class="list-item" id="1933182566#-kghlfp_115"><p id="1933182566#-kghlfp_117">Delete a single record:</p><div class="detached code-block" id="1933182566#-kghlfp_118"><pre><code class="language-sql">DELETE FROM mytable WHERE name = 'John Doe';</code></pre></div></li><li class="list-item" id="1933182566#-kghlfp_116"><p id="1933182566#-kghlfp_119">Delete multiple records:</p><div class="detached code-block" id="1933182566#-kghlfp_120"><pre><code class="language-sql">DELETE FROM mytable WHERE age &lt; 30;</code></pre></div></li></ol></section><section><h3 id="1933182566#5-6-additional-useful-commands" data-toc="5-6-additional-useful-commands#Dockerizing-MySQL.md-5-6-additional-useful-commands">5.6 Additional Useful Commands</h3><ul class="list" id="1933182566#-kghlfp_121" start="1"><li class="list-item" id="1933182566#-kghlfp_122"><p id="1933182566#-kghlfp_125">List all tables in the current database:</p><div class="detached code-block" id="1933182566#-kghlfp_126"><pre><code class="language-sql">SHOW TABLES;</code></pre></div></li><li class="list-item" id="1933182566#-kghlfp_123"><p id="1933182566#-kghlfp_127">Describe the structure of a table:</p><div class="detached code-block" id="1933182566#-kghlfp_128"><pre><code class="language-sql">DESCRIBE mytable;</code></pre></div></li><li class="list-item" id="1933182566#-kghlfp_124"><p id="1933182566#-kghlfp_129">List all users:</p><div class="detached code-block" id="1933182566#-kghlfp_130"><pre><code class="language-sql">SELECT User, Host FROM mysql.user;</code></pre></div></li></ul></section></section><section><h2 id="1933182566#chapter-6-accessing-mysql-from-an-application" data-toc="chapter-6-accessing-mysql-from-an-application#Dockerizing-MySQL.md-chapter-6-accessing-mysql-from-an-application">Chapter 6: Accessing MySQL from an Application</h2><section><h3 id="1933182566#6-1-using-mysql-with-node-js" data-toc="6-1-using-mysql-with-node-js#Dockerizing-MySQL.md-6-1-using-mysql-with-node-js">6.1 Using MySQL with Node.js</h3><ol class="list list-decimal" id="1933182566#-kghlfp_132" type="1" start="1"><li class="list-item" id="1933182566#-kghlfp_133"><p id="1933182566#-kghlfp_139">Install Node.js from the official website (<a href="https://nodejs.org/">https://nodejs.org/</a>).</p></li><li class="list-item" id="1933182566#-kghlfp_134"><p id="1933182566#-kghlfp_141">Create a new project directory and navigate into it:</p><div class="detached code-block" id="1933182566#-kghlfp_142"><pre><code class="language-bash">mkdir my-mysql-app
cd my-mysql-app</code></pre></div></li><li class="list-item" id="1933182566#-kghlfp_135"><p id="1933182566#-kghlfp_143">Initialize a new Node.js project:</p><div class="detached code-block" id="1933182566#-kghlfp_144"><pre><code class="language-bash">npm init -y</code></pre></div></li><li class="list-item" id="1933182566#-kghlfp_136"><p id="1933182566#-kghlfp_145">Install the <span class="inline-code" id="1933182566#-kghlfp_147">mysql</span> package:</p><div class="detached code-block" id="1933182566#-kghlfp_146"><pre><code class="language-bash">npm install mysql2</code></pre></div></li><li class="list-item" id="1933182566#-kghlfp_137"><p id="1933182566#-kghlfp_148">Create an <span class="inline-code" id="1933182566#-kghlfp_150">index.js</span> file and add the following code:</p><div class="detached code-block" id="1933182566#-kghlfp_149"><pre><code class="language-javascript">const mysql = require('mysql2/promise');

 async function main() {
 const connection = await mysql.createConnection({
 host: 'localhost',
 user: 'admin',
 password: 'pass',
 database: 'mydatabase'
 });

 try {
 console.log('connected as id ' + connection.threadId);

     // Insert a record
     const [insertResults] = await connection.execute(
       &quot;INSERT INTO mytable (name, age, occupation) VALUES (?, ?, ?)&quot;,
       ['Alice', 28, 'Designer']
     );
     console.log('Inserted record ID:', insertResults.insertId);

     // Select a record
     const [selectResults] = await connection.execute(
       &quot;SELECT * FROM mytable WHERE name = ?&quot;,
       ['Alice']
     );
     console.log('Selected record:', selectResults[0]);

     // Update a record
     const [updateResults] = await connection.execute(
       &quot;UPDATE mytable SET age = ? WHERE name = ?&quot;,
       [29, 'Alice']
     );
     console.log('Updated record count:', updateResults.affectedRows);

     // Delete a record
     const [deleteResults] = await connection.execute(
       &quot;DELETE FROM mytable WHERE name = ?&quot;,
       ['Alice']
     );
     console.log('Deleted record count:', deleteResults.affectedRows);
 } catch (err) {
 console.error('error:', err.stack);
 } finally {
 await connection.end();
 }
 }

 main();</code></pre></div></li><li class="list-item" id="1933182566#-kghlfp_138"><p id="1933182566#-kghlfp_151">Run the application:</p><div class="detached code-block" id="1933182566#-kghlfp_152"><pre><code class="language-bash">node index.js</code></pre></div></li></ol></section></section><section><h2 id="1933182566#chapter-7-cleaning-up" data-toc="chapter-7-cleaning-up#Dockerizing-MySQL.md-chapter-7-cleaning-up">Chapter 7: Cleaning Up</h2><section><h3 id="1933182566#7-1-stopping-and-removing-the-mysql-container" data-toc="7-1-stopping-and-removing-the-mysql-container#Dockerizing-MySQL.md-7-1-stopping-and-removing-the-mysql-container">7.1 Stopping and Removing the MySQL Container</h3><ul class="list" id="1933182566#-kghlfp_156" start="1"><li class="list-item" id="1933182566#-kghlfp_157"><p id="1933182566#-kghlfp_159">Stop the container:</p><div class="detached code-block" id="1933182566#-kghlfp_160"><pre><code class="language-bash">docker stop mysql_container</code></pre></div></li><li class="list-item" id="1933182566#-kghlfp_158"><p id="1933182566#-kghlfp_161">Remove the container:</p><div class="detached code-block" id="1933182566#-kghlfp_162"><pre><code class="language-bash">docker rm mysql_container</code></pre></div></li></ul></section><section><h3 id="1933182566#7-2-removing-the-mysql-image" data-toc="7-2-removing-the-mysql-image#Dockerizing-MySQL.md-7-2-removing-the-mysql-image">7.2 Removing the MySQL Image</h3><ul class="list" id="1933182566#-kghlfp_163" start="1"><li class="list-item" id="1933182566#-kghlfp_164"><p id="1933182566#-kghlfp_165">Remove the MySQL image:</p><div class="detached code-block" id="1933182566#-kghlfp_166"><pre><code class="language-bash">docker rmi mysql</code></pre></div></li></ul></section><section><h3 id="1933182566#7-3-removing-the-docker-volume" data-toc="7-3-removing-the-docker-volume#Dockerizing-MySQL.md-7-3-removing-the-docker-volume">7.3 Removing the Docker Volume</h3><ul class="list" id="1933182566#-kghlfp_167" start="1"><li class="list-item" id="1933182566#-kghlfp_169"><p id="1933182566#-kghlfp_170">Remove the Docker volume:</p><div class="detached code-block" id="1933182566#-kghlfp_171"><pre><code class="language-bash">docker volume rm mysql-data</code></pre></div></li></ul></section></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="1932050508">5️⃣ Dockerizing MSSQL</h1><section><h2 id="1932050508#chapter-1-introduction" data-toc="chapter-1-introduction#Dockerizing-MSSQL.md-chapter-1-introduction">Chapter 1: Introduction</h2><p id="1932050508#-9yny3v_11">This guide will walk you through the steps of Dockerizing Microsoft SQL Server (MSSQL), setting up a user with specific credentials, persisting data using Docker volumes, and performing basic CRUD (Create, Read, Update, Delete) operations on a Windows system. We will cover everything from pulling the MSSQL image to running queries.</p></section><section><h2 id="1932050508#chapter-2-setting-up-docker" data-toc="chapter-2-setting-up-docker#Dockerizing-MSSQL.md-chapter-2-setting-up-docker">Chapter 2: Setting Up Docker</h2><section><h3 id="1932050508#2-1-installing-docker-on-windows" data-toc="2-1-installing-docker-on-windows#Dockerizing-MSSQL.md-2-1-installing-docker-on-windows">2.1 Installing Docker on Windows</h3><ol class="list list-decimal" id="1932050508#-9yny3v_13" type="1" start="1"><li class="list-item" id="1932050508#-9yny3v_14"><p id="1932050508#-9yny3v_18">Download Docker Desktop from the Docker website (<a href="https://www.docker.com/products/docker-desktop">https://www.docker.com/products/docker-desktop</a>).</p></li><li class="list-item" id="1932050508#-9yny3v_15"><p id="1932050508#-9yny3v_20">Run the installer and follow the instructions.</p></li><li class="list-item" id="1932050508#-9yny3v_16"><p id="1932050508#-9yny3v_21">After installation, start Docker Desktop.</p></li><li class="list-item" id="1932050508#-9yny3v_17"><p id="1932050508#-9yny3v_22">Verify the installation:</p><div class="detached code-block" id="1932050508#-9yny3v_23"><pre><code class="language-bash">docker --version</code></pre></div></li></ol></section></section><section><h2 id="1932050508#chapter-3-dockerizing-mssql-server" data-toc="chapter-3-dockerizing-mssql-server#Dockerizing-MSSQL.md-chapter-3-dockerizing-mssql-server">Chapter 3: Dockerizing MSSQL Server</h2><section><h3 id="1932050508#3-1-pulling-the-mssql-server-image" data-toc="3-1-pulling-the-mssql-server-image#Dockerizing-MSSQL.md-3-1-pulling-the-mssql-server-image">3.1 Pulling the MSSQL Server Image</h3><ul class="list" id="1932050508#-9yny3v_27" start="1"><li class="list-item" id="1932050508#-9yny3v_28"><p id="1932050508#-9yny3v_29">Open a command prompt or PowerShell and run the following command to pull the official MSSQL Server image:</p><div class="detached code-block" id="1932050508#-9yny3v_30"><pre><code class="language-bash">docker pull mcr.microsoft.com/mssql/server</code></pre></div></li></ul></section><section><h3 id="1932050508#3-2-creating-a-docker-volume" data-toc="3-2-creating-a-docker-volume#Dockerizing-MSSQL.md-3-2-creating-a-docker-volume">3.2 Creating a Docker Volume</h3><ul class="list" id="1932050508#-9yny3v_31" start="1"><li class="list-item" id="1932050508#-9yny3v_32"><p id="1932050508#-9yny3v_33">Create a volume to persist MSSQL Server data:</p><div class="detached code-block" id="1932050508#-9yny3v_34"><pre><code class="language-bash">docker volume create mssql-data</code></pre></div></li></ul></section><section><h3 id="1932050508#3-3-running-mssql-server-container-with-authentication-and-persistent-storage" data-toc="3-3-running-mssql-server-container-with-authentication-and-persistent-storage#Dockerizing-MSSQL.md-3-3-running-mssql-server-container-with-authentication-and-persistent-storage">3.3 Running MSSQL Server Container with Authentication and Persistent Storage</h3><ul class="list" id="1932050508#-9yny3v_35" start="1"><li class="list-item" id="1932050508#-9yny3v_36"><p id="1932050508#-9yny3v_38">Run the MSSQL Server container with environment variables to set the SA password and use the volume for data persistence:</p><div class="detached code-block" id="1932050508#-9yny3v_39"><pre><code class="language-bash">docker run -e &quot;ACCEPT_EULA=Y&quot; -e &quot;SA_PASSWORD=yourStrong(!)Password&quot; -p 1433:1433 --name mssql_container -v mssql-data:/var/opt/mssql -d mcr.microsoft.com/mssql/server</code></pre></div></li><li class="list-item" id="1932050508#-9yny3v_37"><p id="1932050508#-9yny3v_40">Verify the container is running:</p><div class="detached code-block" id="1932050508#-9yny3v_41"><pre><code class="language-bash">docker ps</code></pre></div></li></ul></section></section><section><h2 id="1932050508#chapter-4-installing-mssql-command-line-tools" data-toc="chapter-4-installing-mssql-command-line-tools#Dockerizing-MSSQL.md-chapter-4-installing-mssql-command-line-tools">Chapter 4: Installing MSSQL Command Line Tools</h2><section><h3 id="1932050508#4-1-download-and-install-mssql-tools" data-toc="4-1-download-and-install-mssql-tools#Dockerizing-MSSQL.md-4-1-download-and-install-mssql-tools">4.1 Download and Install MSSQL Tools</h3><ol class="list list-decimal" id="1932050508#-9yny3v_43" type="1" start="1"><li class="list-item" id="1932050508#-9yny3v_44"><p id="1932050508#-9yny3v_48">Download the Microsoft ODBC Driver 17 for SQL Server from the Microsoft website (<a href="https://docs.microsoft.com/en-us/sql/connect/odbc/download-odbc-driver-for-sql-server">https://docs.microsoft.com/en-us/sql/connect/odbc/download-odbc-driver-for-sql-server</a>).</p></li><li class="list-item" id="1932050508#-9yny3v_45"><p id="1932050508#-9yny3v_50">Install the ODBC driver by running the downloaded installer.</p></li><li class="list-item" id="1932050508#-9yny3v_46"><p id="1932050508#-9yny3v_51">Download the SQL Server Command Line Tools (<span class="inline-code" id="1932050508#-9yny3v_52">sqlcmd</span> and <span class="inline-code" id="1932050508#-9yny3v_53">bcp</span>) from the Microsoft website (<a href="https://docs.microsoft.com/en-us/sql/tools/sqlcmd-utility">https://docs.microsoft.com/en-us/sql/tools/sqlcmd-utility</a>).</p></li><li class="list-item" id="1932050508#-9yny3v_47"><p id="1932050508#-9yny3v_55">Install the SQL Server Command Line Tools by running the downloaded installer.</p></li></ol></section></section><section><h2 id="1932050508#chapter-5-connecting-to-mssql-server" data-toc="chapter-5-connecting-to-mssql-server#Dockerizing-MSSQL.md-chapter-5-connecting-to-mssql-server">Chapter 5: Connecting to MSSQL Server</h2><section><h3 id="1932050508#5-1-using-mssql-server-command-line-tools" data-toc="5-1-using-mssql-server-command-line-tools#Dockerizing-MSSQL.md-5-1-using-mssql-server-command-line-tools">5.1 Using MSSQL Server Command Line Tools</h3><ol class="list list-decimal" id="1932050508#-9yny3v_58" type="1" start="1"><li class="list-item" id="1932050508#-9yny3v_59"><p id="1932050508#-9yny3v_63">Open Command Prompt or PowerShell.</p></li><li class="list-item" id="1932050508#-9yny3v_60"><p id="1932050508#-9yny3v_64">Connect to the MSSQL Server using <span class="inline-code" id="1932050508#-9yny3v_66">sqlcmd</span>:</p><div class="detached code-block" id="1932050508#-9yny3v_65"><pre><code class="language-bash">sqlcmd -S localhost -U SA -P &quot;yourStrong(!)Password&quot;</code></pre></div></li><li class="list-item" id="1932050508#-9yny3v_61"><p id="1932050508#-9yny3v_67">You should now be in the MSSQL command line:</p><div class="detached code-block" id="1932050508#-9yny3v_68"><pre><code class="language-sql">1&gt;</code></pre></div></li><li class="list-item" id="1932050508#-9yny3v_62"><p id="1932050508#-9yny3v_69">In the MSSQL command line, you can list all databases using the following command:</p><div class="detached code-block" id="1932050508#-9yny3v_70"><pre><code class="language-sql">SELECT name FROM sys.databases;
GO</code></pre></div></li></ol></section><section><h3 id="1932050508#example-session" data-toc="example-session#Dockerizing-MSSQL.md-example-session">Example Session</h3><ul class="list" id="1932050508#-9yny3v_71" start="1"><li class="list-item" id="1932050508#-9yny3v_72"><p id="1932050508#-9yny3v_73">Here's how an example session might look:</p><div class="detached code-block" id="1932050508#-9yny3v_74"><pre><code class="language-bash">C:\&gt; sqlcmd -S localhost -U SA -P &quot;yourStrong(!)Password&quot;
1&gt; SELECT name FROM sys.databases;
2&gt; GO
name
--------------------------------------------------------------------------------------------------------------------------------
master
tempdb
model
msdb
mydatabase

(5 rows affected)
1&gt;</code></pre></div></li></ul></section></section><section><h2 id="1932050508#chapter-6-crud-operations" data-toc="chapter-6-crud-operations#Dockerizing-MSSQL.md-chapter-6-crud-operations">Chapter 6: CRUD Operations</h2><section><h3 id="1932050508#6-1-creating-a-database-and-table" data-toc="6-1-creating-a-database-and-table#Dockerizing-MSSQL.md-6-1-creating-a-database-and-table">6.1 Creating a Database and Table</h3><ol class="list list-decimal" id="1932050508#-9yny3v_81" type="1" start="1"><li class="list-item" id="1932050508#-9yny3v_82"><p id="1932050508#-9yny3v_85">Create a new database called <span class="inline-code" id="1932050508#-9yny3v_87">mydatabase</span>:</p><div class="detached code-block" id="1932050508#-9yny3v_86"><pre><code class="language-sql">CREATE DATABASE mydatabase;
GO</code></pre></div></li><li class="list-item" id="1932050508#-9yny3v_83"><p id="1932050508#-9yny3v_88">Use the new database:</p><div class="detached code-block" id="1932050508#-9yny3v_89"><pre><code class="language-sql">USE mydatabase;
GO</code></pre></div></li><li class="list-item" id="1932050508#-9yny3v_84"><p id="1932050508#-9yny3v_90">Create a new table called <span class="inline-code" id="1932050508#-9yny3v_92">mytable</span>:</p><div class="detached code-block" id="1932050508#-9yny3v_91"><pre><code class="language-sql">CREATE TABLE mytable (
    id INT PRIMARY KEY IDENTITY(1,1),
    name NVARCHAR(100),
    age INT,
    occupation NVARCHAR(100)
);
GO</code></pre></div></li></ol></section><section><h3 id="1932050508#6-2-create-insert-records" data-toc="6-2-create-insert-records#Dockerizing-MSSQL.md-6-2-create-insert-records">6.2 Create (Insert) Records</h3><ol class="list list-decimal" id="1932050508#-9yny3v_93" type="1" start="1"><li class="list-item" id="1932050508#-9yny3v_94"><p id="1932050508#-9yny3v_96">Insert a single record into <span class="inline-code" id="1932050508#-9yny3v_98">mytable</span>:</p><div class="detached code-block" id="1932050508#-9yny3v_97"><pre><code class="language-sql">INSERT INTO mytable (name, age, occupation) VALUES ('John Doe', 30, 'Engineer');
GO</code></pre></div></li><li class="list-item" id="1932050508#-9yny3v_95"><p id="1932050508#-9yny3v_99">Insert multiple records:</p><div class="detached code-block" id="1932050508#-9yny3v_100"><pre><code class="language-sql">INSERT INTO mytable (name, age, occupation) VALUES 
('Jane Doe', 25, 'Teacher'),
('Steve Smith', 40, 'Chef');
GO</code></pre></div></li></ol></section><section><h3 id="1932050508#6-3-read-query-records" data-toc="6-3-read-query-records#Dockerizing-MSSQL.md-6-3-read-query-records">6.3 Read (Query) Records</h3><ol class="list list-decimal" id="1932050508#-9yny3v_101" type="1" start="1"><li class="list-item" id="1932050508#-9yny3v_102"><p id="1932050508#-9yny3v_105">Select one record:</p><div class="detached code-block" id="1932050508#-9yny3v_106"><pre><code class="language-sql">SELECT * FROM mytable WHERE name = 'John Doe';
GO</code></pre></div></li><li class="list-item" id="1932050508#-9yny3v_103"><p id="1932050508#-9yny3v_107">Select all records:</p><div class="detached code-block" id="1932050508#-9yny3v_108"><pre><code class="language-sql">SELECT * FROM mytable;
GO</code></pre></div></li><li class="list-item" id="1932050508#-9yny3v_104"><p id="1932050508#-9yny3v_109">Select records with a condition:</p><div class="detached code-block" id="1932050508#-9yny3v_110"><pre><code class="language-sql">SELECT * FROM mytable WHERE age &gt; 30;
GO</code></pre></div></li></ol></section><section><h3 id="1932050508#6-4-update-records" data-toc="6-4-update-records#Dockerizing-MSSQL.md-6-4-update-records">6.4 Update Records</h3><ol class="list list-decimal" id="1932050508#-9yny3v_111" type="1" start="1"><li class="list-item" id="1932050508#-9yny3v_112"><p id="1932050508#-9yny3v_114">Update a single record:</p><div class="detached code-block" id="1932050508#-9yny3v_115"><pre><code class="language-sql">UPDATE mytable SET age = 31 WHERE name = 'John Doe';
GO</code></pre></div></li><li class="list-item" id="1932050508#-9yny3v_113"><p id="1932050508#-9yny3v_116">Update multiple records:</p><div class="detached code-block" id="1932050508#-9yny3v_117"><pre><code class="language-sql">UPDATE mytable SET occupation = 'Head Chef' WHERE occupation = 'Chef';
GO</code></pre></div></li></ol></section><section><h3 id="1932050508#6-5-delete-records" data-toc="6-5-delete-records#Dockerizing-MSSQL.md-6-5-delete-records">6.5 Delete Records</h3><ol class="list list-decimal" id="1932050508#-9yny3v_118" type="1" start="1"><li class="list-item" id="1932050508#-9yny3v_119"><p id="1932050508#-9yny3v_121">Delete a single record:</p><div class="detached code-block" id="1932050508#-9yny3v_122"><pre><code class="language-sql">DELETE FROM mytable WHERE name = 'John Doe';
GO</code></pre></div></li><li class="list-item" id="1932050508#-9yny3v_120"><p id="1932050508#-9yny3v_123">Delete multiple records:</p><div class="detached code-block" id="1932050508#-9yny3v_124"><pre><code class="language-sql">DELETE FROM mytable WHERE age &lt; 30;
GO</code></pre></div></li></ol></section><section><h3 id="1932050508#6-6-additional-useful-commands" data-toc="6-6-additional-useful-commands#Dockerizing-MSSQL.md-6-6-additional-useful-commands">6.6 Additional Useful Commands</h3><ul class="list" id="1932050508#-9yny3v_125" start="1"><li class="list-item" id="1932050508#-9yny3v_126"><p id="1932050508#-9yny3v_129">List all tables in the current database:</p><div class="detached code-block" id="1932050508#-9yny3v_130"><pre><code class="language-sql">SELECT * FROM sys.Tables;
GO</code></pre></div></li><li class="list-item" id="1932050508#-9yny3v_127"><p id="1932050508#-9yny3v_131">Describe the structure of a table:</p><div class="detached code-block" id="1932050508#-9yny3v_132"><pre><code class="language-sql">sp_help mytable;
GO</code></pre></div></li><li class="list-item" id="1932050508#-9yny3v_128"><p id="1932050508#-9yny3v_133">List all users:</p><div class="detached code-block" id="1932050508#-9yny3v_134"><pre><code class="language-sql">SELECT name FROM sys.sql_logins;
GO</code></pre></div></li></ul></section></section><section><h2 id="1932050508#chapter-7-accessing-mssql-server-from-an-application" data-toc="chapter-7-accessing-mssql-server-from-an-application#Dockerizing-MSSQL.md-chapter-7-accessing-mssql-server-from-an-application">Chapter 7: Accessing MSSQL Server from an Application</h2><section><h3 id="1932050508#7-1-using-mssql-server-with-node-js" data-toc="7-1-using-mssql-server-with-node-js#Dockerizing-MSSQL.md-7-1-using-mssql-server-with-node-js">7.1 Using MSSQL Server with Node.js</h3><ol class="list list-decimal" id="1932050508#-9yny3v_136" type="1" start="1"><li class="list-item" id="1932050508#-9yny3v_137"><p id="1932050508#-9yny3v_143">Install Node.js from the official website (<a href="https://nodejs.org/">https://nodejs.org/</a>).</p></li><li class="list-item" id="1932050508#-9yny3v_138"><p id="1932050508#-9yny3v_145">Create a new project directory and navigate into it:</p><div class="detached code-block" id="1932050508#-9yny3v_146"><pre><code class="language-bash">mkdir my-mssql-app
cd my-mssql-app</code></pre></div></li><li class="list-item" id="1932050508#-9yny3v_139"><p id="1932050508#-9yny3v_147">Initialize a new Node.js project:</p><div class="detached code-block" id="1932050508#-9yny3v_148"><pre><code class="language-bash">npm init -y</code></pre></div></li><li class="list-item" id="1932050508#-9yny3v_140"><p id="1932050508#-9yny3v_149">Install the <span class="inline-code" id="1932050508#-9yny3v_151">mssql</span> package:</p><div class="detached code-block" id="1932050508#-9yny3v_150"><pre><code class="language-bash">npm install mssql</code></pre></div></li><li class="list-item" id="1932050508#-9yny3v_141"><p id="1932050508#-9yny3v_152">Create an <span class="inline-code" id="1932050508#-9yny3v_154">index.js</span> file and add the following code:</p><div class="detached code-block" id="1932050508#-9yny3v_153"><pre><code class="language-javascript">const sql = require('mssql');

const config = {
  user: 'sa',
  password: 'yourStrong(!)Password',
  server: 'localhost', 
  database: 'mydatabase',
  options: {
    encrypt: true, // Use encryption
    trustServerCertificate: true // For self-signed certificate
  }
};

async function main() {
  try {
    let pool = await sql.connect(config);

    // Insert a record
    let insertResult = await pool.request()
      .query(&quot;INSERT INTO mytable (name, age, occupation) VALUES ('Alice', 28, 'Designer')&quot;);
    console.log('Inserted record:', insertResult);

     // Insert a many
     let insertResult = await pool.request()
         .query(`INSERT INTO mytable (name, age, occupation) VALUES  
             ('jane doe', 30, 'Designer'),
             ('kyle Smith', 40, 'Chef')`);
     console.log('Inserted record:', insertResult);

    // Select a record
    let selectResult = await pool.request()
      .query(&quot;SELECT * FROM mytable WHERE name = 'Alice'&quot;);
    console.log('Selected record:', selectResult.recordset);

    // Update a record
    let updateResult = await pool.request()
      .query(&quot;UPDATE mytable SET age = 29 WHERE name = 'Alice'&quot;);
    console.log('Updated record:', updateResult);

    // Delete a record
    let deleteResult = await pool.request()
      .query(&quot;DELETE FROM mytable WHERE name = 'Alice'&quot;);
    console.log('Deleted record:', deleteResult);

  } catch (err) {
    console.error('SQL error', err);
  }
}

main();</code></pre></div></li><li class="list-item" id="1932050508#-9yny3v_142"><p id="1932050508#-9yny3v_155">Run the application:</p><div class="detached code-block" id="1932050508#-9yny3v_156"><pre><code class="language-bash">node index.js</code></pre></div></li></ol></section></section><section><h2 id="1932050508#chapter-8-cleaning-up" data-toc="chapter-8-cleaning-up#Dockerizing-MSSQL.md-chapter-8-cleaning-up">Chapter 8: Cleaning Up</h2><section><h3 id="1932050508#8-1-stopping-and-removing-the-mssql-server-container" data-toc="8-1-stopping-and-removing-the-mssql-server-container#Dockerizing-MSSQL.md-8-1-stopping-and-removing-the-mssql-server-container">8.1 Stopping and Removing the MSSQL Server Container</h3><ul class="list" id="1932050508#-9yny3v_160" start="1"><li class="list-item" id="1932050508#-9yny3v_161"><p id="1932050508#-9yny3v_163">Stop the container:</p><div class="detached code-block" id="1932050508#-9yny3v_164"><pre><code class="language-bash">docker stop mssql_container
``</code></pre></div></li><li class="list-item" id="1932050508#-9yny3v_162"><p id="1932050508#-9yny3v_165">Remove the container:</p><div class="detached code-block" id="1932050508#-9yny3v_166"><pre><code class="language-bash">docker rm mssql_container</code></pre></div></li></ul></section><section><h3 id="1932050508#8-2-removing-the-mssql-server-image" data-toc="8-2-removing-the-mssql-server-image#Dockerizing-MSSQL.md-8-2-removing-the-mssql-server-image">8.2 Removing the MSSQL Server Image</h3><ul class="list" id="1932050508#-9yny3v_167" start="1"><li class="list-item" id="1932050508#-9yny3v_168"><p id="1932050508#-9yny3v_169">Remove the MSSQL Server image:</p><div class="detached code-block" id="1932050508#-9yny3v_170"><pre><code class="language-bash">docker rmi mcr.microsoft.com/mssql/server</code></pre></div></li></ul></section><section><h3 id="1932050508#8-3-removing-the-docker-volume" data-toc="8-3-removing-the-docker-volume#Dockerizing-MSSQL.md-8-3-removing-the-docker-volume">8.3 Removing the Docker Volume</h3><ul class="list" id="1932050508#-9yny3v_171" start="1"><li class="list-item" id="1932050508#-9yny3v_172"><p id="1932050508#-9yny3v_173">Remove the Docker volume:</p><div class="detached code-block" id="1932050508#-9yny3v_174"><pre><code class="language-bash">docker volume rm mssql-data</code></pre></div></li></ul></section></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="2032313741">Restore the old Context Menu in Windows 11</h1><ol class="list list-decimal" id="2032313741#z6r3ldo_3" type="1" start="1"><li class="list-item" id="2032313741#z6r3ldo_5"><p>Right-click the Start button and choose Windows Terminal.</p></li><li class="list-item" id="2032313741#z6r3ldo_6"><p>Copy the command from below, paste it into Windows Terminal Window, and press enter.</p></li><li class="list-item" id="2032313741#z6r3ldo_7"><div class="detached code-block" id="2032313741#z6r3ldo_10"><pre><code class="language-bash">reg.exe add &quot;HKCU\Software\Classes\CLSID\{86ca1aa0-34aa-4e8b-a509-50c905bae2a2}\InprocServer32&quot; /f /ve</code></pre></div></li><li class="list-item" id="2032313741#z6r3ldo_8"><p>Restart File Explorer or your computer for the changes to take effect.</p></li><li class="list-item" id="2032313741#z6r3ldo_9"><p>You would see the Legacy Right Click Context menu by default.</p></li></ol><section><h2 id="2032313741#restore-modern-context-menus-in-windows-11" data-toc="restore-modern-context-menus-in-windows-11#Modern-Context-menus-in-Windows-11.md-restore-modern-context-menus-in-windows-11">Restore Modern Context menus in Windows 11</h2><ul class="list" id="2032313741#z6r3ldo_11" start="1"><li class="list-item" id="2032313741#z6r3ldo_12"><p id="2032313741#z6r3ldo_13">To undo this change, in a Terminal Window, execute this command:</p><div class="detached code-block" id="2032313741#z6r3ldo_14"><pre><code class="language-bash">reg.exe delete &quot;HKCU\Software\Classes\CLSID\{86ca1aa0-34aa-4e8b-a509-50c905bae2a2}&quot; /f</code></pre></div></li></ul></section></article></div></section><section class="topic"><div><article class="article"><h1 class="main-title" id="-1148225448">Dockerizing a React App with Node.js, Postgres, and Nginx &lt;Dev &amp; Prod&gt;</h1><p id="-1148225448#-q8l2nj_2">This guide provides a step-by-step approach to Dockerizing a React application using Vite, with Node.js, Postgres, and Nginx, for both development and production environments.</p><section><h2 id="-1148225448#development-mode" data-toc="development-mode#Dockerizing-React-app-Nodejs-Postgres-&amp;-NginX[dev].md-development-mode">Development Mode</h2><div class="container"><figure class="image-container"><img class="center image image-size" id="-1148225448#-q8l2nj_13" alt="dev.png" title="dev.png" src="D:/KelchoRepos/WritersideProjects/TEACH2GIVE-Docker/Writerside/images/dev.png" width="1041" height="442"><figcaption class="center-text">dev.png</figcaption></figure></div><p id="-1148225448#-q8l2nj_14">In your development environment, the architecture works as follows:</p><ol class="list list-decimal" id="-1148225448#-q8l2nj_15" type="1" start="1"><li class="list-item" id="-1148225448#-q8l2nj_17"><p><span class="control" id="-1148225448#-q8l2nj_21">Nginx</span> acts as a reverse proxy, routing incoming HTTP requests to either the <span class="control" id="-1148225448#-q8l2nj_22">React server</span> or the <span class="control" id="-1148225448#-q8l2nj_23">Express server</span> based on the request path.</p></li><li class="list-item" id="-1148225448#-q8l2nj_18"><p><span class="control" id="-1148225448#-q8l2nj_24">React Server</span> handles all requests for the frontend (i.e., your React application). When you develop, changes here are served by the React development server, often with hot-reloading.</p></li><li class="list-item" id="-1148225448#-q8l2nj_19"><p><span class="control" id="-1148225448#-q8l2nj_25">Express Server</span> processes backend API requests. These requests might involve querying or updating data in the <span class="control" id="-1148225448#-q8l2nj_26">Postgres</span> database.</p></li><li class="list-item" id="-1148225448#-q8l2nj_20"><p><span class="control" id="-1148225448#-q8l2nj_27">Nginx</span> forwards requests: </p><ul class="list" id="-1148225448#-q8l2nj_28" start="1"><li class="list-item" id="-1148225448#-q8l2nj_29"><p>Requests to the base URL (e.g., <span class="inline-code" id="-1148225448#-q8l2nj_31">http://localhost/</span>) are sent to the React server.</p></li><li class="list-item" id="-1148225448#-q8l2nj_30"><p>Requests to paths starting with <span class="inline-code" id="-1148225448#-q8l2nj_32">/api</span> are forwarded to the Express server, which may interact with the Postgres database.</p></li></ul></li></ol><p id="-1148225448#-q8l2nj_16">This setup allows you to work on both the frontend and backend in a unified environment, ensuring that you can test how they interact together while still enjoying the benefits of a development-focused workflow like hot-reloading and quick feedback.</p></section><section><h2 id="-1148225448#react-folder-file-structure" data-toc="react-folder-file-structure#Dockerizing-React-app-Nodejs-Postgres-&amp;-NginX[dev].md-react-folder-file-structure">React Folder &amp; File structure</h2><section><h3 id="-1148225448#1-client-react-vite" data-toc="1-client-react-vite#Dockerizing-React-app-Nodejs-Postgres-&amp;-NginX[dev].md-1-client-react-vite">1. Client: React + Vite</h3><div class="container"><figure class="image-container"><img class="center image image-size" id="-1148225448#-q8l2nj_39" alt="react-structure.png" title="react-structure.png" src="D:/KelchoRepos/WritersideProjects/TEACH2GIVE-Docker/Writerside/images/react-structure.png" width="492" height="454"><figcaption class="center-text">react-structure.png</figcaption></figure></div><ul class="list" id="-1148225448#-q8l2nj_40" start="1"><li class="list-item" id="-1148225448#-q8l2nj_41"><p id="-1148225448#-q8l2nj_43"><span class="control" id="-1148225448#-q8l2nj_45">Create a Vite React project:</span></p><div class="detached code-block" id="-1148225448#-q8l2nj_44"><pre><code class="language-bash">npm create vite@latest my-react-app -- --template react
cd my-react-app
npm install</code></pre></div></li><li class="list-item" id="-1148225448#-q8l2nj_42"><p id="-1148225448#-q8l2nj_46"><span class="control" id="-1148225448#-q8l2nj_48">Install necessary dependencies:</span> You'll need to install <span class="inline-code" id="-1148225448#-q8l2nj_49">react-router-dom</span> and <span class="inline-code" id="-1148225448#-q8l2nj_50">axios</span> for routing and HTTP requests.</p><div class="detached code-block" id="-1148225448#-q8l2nj_47"><pre><code class="language-bash">npm install react-router-dom@4.3.1 axios</code></pre></div></li></ul></section><section><h3 id="-1148225448#2-create-the-project-structure" data-toc="2-create-the-project-structure#Dockerizing-React-app-Nodejs-Postgres-&amp;-NginX[dev].md-2-create-the-project-structure">2. Create the Project Structure</h3><p id="-1148225448#-q8l2nj_51">Your project should be structured as follows:</p><div class="detached code-block" id="-1148225448#-q8l2nj_52"><pre><code class="language-none">my-react-app/
├── node_modules/ 
├── public/
├── src/
│   ├── assets/
│   ├── Components/
│   │   ├── MainComponent.jsx
│   │   ├── MainComponent.css
│   │   ├── OtherPage.jsx
│   ├── App.css
│   ├── App.jsx
│   ├── index.css
│   ├── main.jsx
│   └── vite-env.d.ts
├── .dockerignore
├── .gitignore
├── Dockerfile.dev
├── Dockerfile
├── eslint.config.js
├── index.html
├── package.json
├── pnpm-lock.yaml
├── README.md
└── vite.config.js</code></pre></div></section><section><h3 id="-1148225448#3-add-the-required-code" data-toc="3-add-the-required-code#Dockerizing-React-app-Nodejs-Postgres-&amp;-NginX[dev].md-3-add-the-required-code">3. Add the Required Code</h3><ul class="list" id="-1148225448#-q8l2nj_53" start="1"><li class="list-item" id="-1148225448#-q8l2nj_67"><section><h4 id="-1148225448#src-app-jsx" data-toc="src-app-jsx#Dockerizing-React-app-Nodejs-Postgres-&amp;-NginX[dev].md-src-app-jsx">src/App.jsx</h4></section></li></ul><div class="detached code-block" id="-1148225448#-q8l2nj_54"><pre><code class="language-javascript">import './App.css';
import { BrowserRouter as Router, Route, Link } from &quot;react-router-dom&quot;;
import MainComponent from './Components/MainComponent';
import OtherPage from './Components/OtherPage';

function App() {
  return (
    &lt;Router&gt;
      &lt;&gt;
        &lt;header className=&quot;header&quot;&gt;
          &lt;div&gt;This is a multicontainer application&lt;/div&gt;
          &lt;Link to=&quot;/&quot;&gt;Home&lt;/Link&gt;
          &lt;Link to=&quot;/otherpage&quot;&gt;Other page&lt;/Link&gt;
        &lt;/header&gt;
        &lt;div className=&quot;main&quot;&gt;
          &lt;Route exact path=&quot;/&quot; component={MainComponent} /&gt;
          &lt;Route path=&quot;/otherpage&quot; component={OtherPage} /&gt;
        &lt;/div&gt;
      &lt;/&gt;
    &lt;/Router&gt;
  );
}

export default App;</code></pre></div><ul class="list" id="-1148225448#-q8l2nj_55" start="1"><li class="list-item" id="-1148225448#-q8l2nj_71"><section><h4 id="-1148225448#src-app-css" data-toc="src-app-css#Dockerizing-React-app-Nodejs-Postgres-&amp;-NginX[dev].md-src-app-css">src/App.css</h4></section></li></ul><div class="detached code-block" id="-1148225448#-q8l2nj_56"><pre><code class="language-css">.header {
  background: #eee;
}

.header a {
  margin-left: 20px;
}

.main {
  padding: 10px;
  background: #ccc;
}</code></pre></div><ul class="list" id="-1148225448#-q8l2nj_57" start="1"><li class="list-item" id="-1148225448#-q8l2nj_75"><section><h4 id="-1148225448#src-index-css" data-toc="src-index-css#Dockerizing-React-app-Nodejs-Postgres-&amp;-NginX[dev].md-src-index-css">src/index.css</h4></section></li></ul><div class="detached code-block" id="-1148225448#-q8l2nj_58"><pre><code class="language-css">body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

code {
  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',
    monospace;
}</code></pre></div><ul class="list" id="-1148225448#-q8l2nj_59" start="1"><li class="list-item" id="-1148225448#-q8l2nj_79"><section><h4 id="-1148225448#src-main-jsx" data-toc="src-main-jsx#Dockerizing-React-app-Nodejs-Postgres-&amp;-NginX[dev].md-src-main-jsx">src/main.jsx</h4></section></li></ul><div class="detached code-block" id="-1148225448#-q8l2nj_60"><pre><code class="language-javascript">import { StrictMode } from 'react';
import { createRoot } from 'react-dom/client';
import App from './App.jsx';
import './index.css';

createRoot(document.getElementById('root')).render(
  &lt;StrictMode&gt;
    &lt;App /&gt;
  &lt;/StrictMode&gt;,
);</code></pre></div><ul class="list" id="-1148225448#-q8l2nj_61" start="1"><li class="list-item" id="-1148225448#-q8l2nj_83"><section><h4 id="-1148225448#src-components-maincomponent-jsx" data-toc="src-components-maincomponent-jsx#Dockerizing-React-app-Nodejs-Postgres-&amp;-NginX[dev].md-src-components-maincomponent-jsx">src/Components/MainComponent.jsx</h4></section></li></ul><div class="detached code-block" id="-1148225448#-q8l2nj_62"><pre><code class="language-javascript">import { useCallback, useState, useEffect } from &quot;react&quot;;
import axios from &quot;axios&quot;;
import &quot;./MainComponent.css&quot;;

function MainComponent() {
  const [values, setValues] = useState([]);
  const [value, setValue] = useState(&quot;&quot;);

  const getAllNumbers = useCallback(async () =&gt; {
    const data = await axios.get(&quot;/api/values/all&quot;);
    setValues(data.data.rows.map(row =&gt; row.number));
  }, []);

  const saveNumber = useCallback(
    async (event) =&gt; {
      event.preventDefault();
      await axios.post(&quot;/api/values&quot;, { value });

      setValue(&quot;&quot;);
      getAllNumbers();
    },
    [value, getAllNumbers]
  );

  useEffect(() =&gt; {
    getAllNumbers();
  }, []);

  return (
    &lt;div&gt;
      &lt;button onClick={getAllNumbers}&gt;Get all numbers&lt;/button&gt;
      &lt;br /&gt;
      &lt;span className=&quot;title&quot;&gt;Values&lt;/span&gt;
      &lt;div className=&quot;values&quot;&gt;
        {values.map((value, index) =&gt; (
          &lt;div className=&quot;value&quot; key={index}&gt;{value}&lt;/div&gt;
        ))}
      &lt;/div&gt;
      &lt;form className=&quot;form&quot; onSubmit={saveNumber}&gt;
        &lt;label&gt;Enter your value: &lt;/label&gt;
        &lt;input
          value={value}
          onChange={event =&gt; {
            setValue(event.target.value);
          }}
        /&gt;
        &lt;button&gt;Submit&lt;/button&gt;
      &lt;/form&gt;
    &lt;/div&gt;
  );
}

export default MainComponent;</code></pre></div><ul class="list" id="-1148225448#-q8l2nj_63" start="1"><li class="list-item" id="-1148225448#-q8l2nj_87"><section><h4 id="-1148225448#src-components-maincomponent-css" data-toc="src-components-maincomponent-css#Dockerizing-React-app-Nodejs-Postgres-&amp;-NginX[dev].md-src-components-maincomponent-css">src/Components/MainComponent.css</h4></section></li></ul><div class="detached code-block" id="-1148225448#-q8l2nj_64"><pre><code class="language-css">.title {
  font-weight: bold;
}

.values {
  margin-top: 20px;
  background: yellow;
}

.value {
  margin-top: 10px;
  border-top: 1px dashed black;
}

.form {
  margin-top: 20px;
}</code></pre></div><ul class="list" id="-1148225448#-q8l2nj_65" start="1"><li class="list-item" id="-1148225448#-q8l2nj_91"><section><h4 id="-1148225448#src-components-otherpage-jsx" data-toc="src-components-otherpage-jsx#Dockerizing-React-app-Nodejs-Postgres-&amp;-NginX[dev].md-src-components-otherpage-jsx">src/Components/OtherPage.jsx</h4></section></li></ul><div class="detached code-block" id="-1148225448#-q8l2nj_66"><pre><code class="language-javascript">import { Link } from &quot;react-router-dom&quot;;

function OtherPage() {
  return (
    &lt;div&gt;
      I'm another page!
      &lt;br /&gt;
      &lt;br /&gt;
      &lt;Link to=&quot;/&quot;&gt;Go back to home screen&lt;/Link&gt;
    &lt;/div&gt;
  );
}

export default OtherPage;</code></pre></div></section><section><h3 id="-1148225448#4-configuration-files" data-toc="4-configuration-files#Dockerizing-React-app-Nodejs-Postgres-&amp;-NginX[dev].md-4-configuration-files">4. Configuration Files</h3><ul class="list" id="-1148225448#-q8l2nj_95" start="1"><li class="list-item" id="-1148225448#-q8l2nj_99"><section><h4 id="-1148225448#dockerignore" data-toc="dockerignore#Dockerizing-React-app-Nodejs-Postgres-&amp;-NginX[dev].md-dockerignore">.dockerignore</h4></section></li></ul><div class="detached code-block" id="-1148225448#-q8l2nj_96"><pre><code class="language-none">node_modules
build
.git
.gitignore
Dockerfile
Dockerfile.dev
.dockerignore
*.log
.DS_Store
.git</code></pre></div><ul class="list" id="-1148225448#-q8l2nj_97" start="1"><li class="list-item" id="-1148225448#-q8l2nj_103"><section><h4 id="-1148225448#gitignore" data-toc="gitignore#Dockerizing-React-app-Nodejs-Postgres-&amp;-NginX[dev].md-gitignore">.gitignore</h4></section></li></ul><div class="detached code-block" id="-1148225448#-q8l2nj_98"><pre><code class="language-none"># Logs
logs
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*
pnpm-debug.log*
lerna-debug.log*

node_modules
dist
dist-ssr
*.local

# Editor directories and files
.vscode/*
!.vscode/extensions.json
.idea
.DS_Store
*.suo
*.ntvs*
*.njsproj
*.sln
*.sw?</code></pre></div></section><section><h3 id="-1148225448#4-adjust-the-vite-config-js-config" data-toc="4-adjust-the-vite-config-js-config#Dockerizing-React-app-Nodejs-Postgres-&amp;-NginX[dev].md-4-adjust-the-vite-config-js-config">4. Adjust the vite.config.js config</h3><ul class="list" id="-1148225448#-q8l2nj_107" start="1"><li class="list-item" id="-1148225448#-q8l2nj_109"><section><h4 id="-1148225448#vite-config-js" data-toc="vite-config-js#Dockerizing-React-app-Nodejs-Postgres-&amp;-NginX[dev].md-vite-config-js">vite.config.js</h4></section></li></ul><div class="detached code-block" id="-1148225448#-q8l2nj_108"><pre><code class="language-javascript">import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'
export default defineConfig({
  plugins: [react()],
  server: {
    host: true,
    port: 5173,
    watch: {
      usePolling: true
    }
  }
})</code></pre></div></section><section><h3 id="-1148225448#5-add-the-docker-files" data-toc="5-add-the-docker-files#Dockerizing-React-app-Nodejs-Postgres-&amp;-NginX[dev].md-5-add-the-docker-files">5. Add the docker files</h3><ul class="list" id="-1148225448#-q8l2nj_113" start="1"><li class="list-item" id="-1148225448#-q8l2nj_115"><section><h4 id="-1148225448#docker-dev" data-toc="docker-dev#Dockerizing-React-app-Nodejs-Postgres-&amp;-NginX[dev].md-docker-dev">Docker.dev</h4></section></li></ul><div class="detached code-block" id="-1148225448#-q8l2nj_114"><pre><code class="language-dockerfile"># Use an official Node.js runtime as a parent image                       
FROM node:20.16.0-alpine                                                  
# Set the working directory in the container                              
WORKDIR /app                                                              
# Install dependencies                                                    
COPY package.json pnpm-lock.yaml ./                                       
# Copy the rest of the application code                                   
COPY . .                                                                  
# Expose port 5173 (default Vite port)                                    
EXPOSE 5173                                                               
# Command to run the development server                                   
CMD [&quot;npm&quot;, &quot;run&quot;, &quot;dev&quot;]</code></pre></div></section></section><section><h2 id="-1148225448#build-the-docker-image" data-toc="build-the-docker-image#Dockerizing-React-app-Nodejs-Postgres-&amp;-NginX[dev].md-build-the-docker-image">Build the Docker Image</h2><p id="-1148225448#-q8l2nj_119">Navigate to the root directory of your project where the Dockerfile.dev is located. Run the following command to build the Docker image for development:</p><div class="detached code-block" id="-1148225448#-q8l2nj_120"><pre><code class="language-bash">docker build -t my-react-app-dev -f Dockerfile.dev .</code></pre></div><p id="-1148225448#-q8l2nj_121">This command tells Docker to:</p><p id="-1148225448#-q8l2nj_122">-t client: Tag the image as my-react-app-dev. -f Dockerfile.dev: Use the Dockerfile.dev file for building the image.</p></section><section><h2 id="-1148225448#run-the-docker-container" data-toc="run-the-docker-container#Dockerizing-React-app-Nodejs-Postgres-&amp;-NginX[dev].md-run-the-docker-container">Run the Docker Container</h2><p id="-1148225448#-q8l2nj_123">After building the image, you can run the container with the following command:</p><div class="detached code-block" id="-1148225448#-q8l2nj_124"><pre><code class="language-bash">docker run -it --rm -p 5173:5173 client</code></pre></div><p id="-1148225448#-q8l2nj_125">Explanation:</p><ul class="list" id="-1148225448#-q8l2nj_126" start="1"><li class="list-item" id="-1148225448#-q8l2nj_127"><p><span class="control" id="-1148225448#-q8l2nj_129">-it</span>: Runs the container interactively.</p></li><li class="list-item" id="-1148225448#-q8l2nj_128"><p><span class="control" id="-1148225448#-q8l2nj_130">--rm</span>: Automatically removes the container when it exits. -p <span class="inline-code" id="-1148225448#-q8l2nj_131">5173:5173</span>: Maps port 5173 on your local machine to port 5173 in the container, which is where the Vite development server will be running.</p></li></ul></section><section><h2 id="-1148225448#node-express-folder-file-structure" data-toc="node-express-folder-file-structure#Dockerizing-React-app-Nodejs-Postgres-&amp;-NginX[dev].md-node-express-folder-file-structure">Node Express Folder &amp; File Structure</h2><p id="-1148225448#-q8l2nj_132">Here's a guide to create an Express.js application, dockerizing it for development, and managing environment variables securely using a <span class="inline-code" id="-1148225448#-q8l2nj_142">keys.js</span> file.</p><div class="container"><figure class="image-container"><img class="center image image-size" id="-1148225448#-q8l2nj_133" alt="serverfolderstructure.png" title="serverfolderstructure.png" src="D:/KelchoRepos/WritersideProjects/TEACH2GIVE-Docker/Writerside/images/serverfolderstructure.png" width="292" height="214"><figcaption class="center-text">serverfolderstructure.png</figcaption></figure></div><section><h3 id="-1148225448#step-1-set-up-the-project-directory" data-toc="step-1-set-up-the-project-directory#Dockerizing-React-app-Nodejs-Postgres-&amp;-NginX[dev].md-step-1-set-up-the-project-directory">Step 1: Set Up the Project Directory</h3><div class="detached code-block" id="-1148225448#-q8l2nj_143"><pre><code class="language-bash">server/
├── node_modules/ 
├── .dockerignore 
├── Dockerfile.dev 
├── index.js
├── keys.js 
├── package.json
├── pnpm-lock.yaml
└── .gitignore</code></pre></div><p id="-1148225448#-q8l2nj_144">Create a new directory for your project:</p><div class="detached code-block" id="-1148225448#-q8l2nj_145"><pre><code class="language-bash">mkdir express-postgres-app
cd express-postgres-app</code></pre></div></section><section><h3 id="-1148225448#step-2-initialize-the-node-js-project" data-toc="step-2-initialize-the-node-js-project#Dockerizing-React-app-Nodejs-Postgres-&amp;-NginX[dev].md-step-2-initialize-the-node-js-project">Step 2: Initialize the Node.js Project</h3><p id="-1148225448#-q8l2nj_146">Run the following command to initialize a new Node.js project:</p><div class="detached code-block" id="-1148225448#-q8l2nj_147"><pre><code class="language-bash">npm init -y</code></pre></div><p id="-1148225448#-q8l2nj_148">This will create a <span class="inline-code" id="-1148225448#-q8l2nj_149">package.json</span> file with default settings.</p></section><section><h3 id="-1148225448#step-3-install-dependencies" data-toc="step-3-install-dependencies#Dockerizing-React-app-Nodejs-Postgres-&amp;-NginX[dev].md-step-3-install-dependencies">Step 3: Install Dependencies</h3><p id="-1148225448#-q8l2nj_150">Install the required dependencies: Express, PostgreSQL client (pg), CORS, and body-parser:</p><div class="detached code-block" id="-1148225448#-q8l2nj_151"><pre><code class="language-bash">npm install express pg cors body-parser</code></pre></div></section><section><h3 id="-1148225448#step-4-create-the-application-files" data-toc="step-4-create-the-application-files#Dockerizing-React-app-Nodejs-Postgres-&amp;-NginX[dev].md-step-4-create-the-application-files">Step 4: Create the Application Files</h3><section><h4 id="-1148225448#1-create-index-js" data-toc="1-create-index-js#Dockerizing-React-app-Nodejs-Postgres-&amp;-NginX[dev].md-1-create-index-js">1. Create index.js</h4><p id="-1148225448#-q8l2nj_155">In the root of your project directory, create a file named <span class="inline-code" id="-1148225448#-q8l2nj_159">index.js</span> and add the following code:</p><div class="detached code-block" id="-1148225448#-q8l2nj_156"><pre><code class="language-javascript">const keys = require(&quot;./keys&quot;);
const express = require(&quot;express&quot;);
const bodyParser = require(&quot;body-parser&quot;);
const cors = require(&quot;cors&quot;);
const { Pool } = require(&quot;pg&quot;);

const app = express();

// Middlewares
app.use(cors());
app.use(bodyParser.json());

// Postgres client setup
const pgClient = new Pool({
  user: keys.pgUser,
  host: keys.pgHost,
  database: keys.pgDatabase,
  password: keys.pgPassword,
  port: keys.pgPort
});

pgClient.on(&quot;connect&quot;, client =&gt; {
  client.query(&quot;CREATE TABLE IF NOT EXISTS values (number INT)&quot;)
    .catch(err =&gt; console.log(&quot;PG ERROR&quot;, err));
});

// Express route definitions
app.get(&quot;/&quot;, (req, res) =&gt; {
  res.send(&quot;Hi&quot;);
});

// Get all values
app.get(&quot;/values/all&quot;, async (req, res) =&gt; {
  const values = await pgClient.query(&quot;SELECT * FROM values&quot;);
  res.send(values.rows);
});

// Insert a new value
app.post(&quot;/values&quot;, async (req, res) =&gt; {
  if (!req.body.value) return res.send({ working: false });

  await pgClient.query(&quot;INSERT INTO values(number) VALUES($1)&quot;, [req.body.value]);

  res.send({ working: true });
});

app.listen(8000, () =&gt; {
  console.log(&quot;Listening on port 8000&quot;);
});</code></pre></div></section><section><h4 id="-1148225448#2-create-keys-js" data-toc="2-create-keys-js#Dockerizing-React-app-Nodejs-Postgres-&amp;-NginX[dev].md-2-create-keys-js">2. Create keys.js</h4><p id="-1148225448#-q8l2nj_161">Create a file named <span class="inline-code" id="-1148225448#-q8l2nj_166">keys.js</span> in the root directory with the following content:</p><div class="detached code-block" id="-1148225448#-q8l2nj_162"><pre><code class="language-javascript">module.exports = {
  pgUser: process.env.PGUSER,
  pgHost: process.env.PGHOST,
  pgDatabase: process.env.PGDATABASE,
  pgPassword: process.env.PGPASSWORD,
  pgPort: process.env.PGPORT
};</code></pre></div><p id="-1148225448#-q8l2nj_163">This file securely references environment variables for your PostgreSQL connection.</p></section></section><section><h3 id="-1148225448#step-5-create-docker-configuration" data-toc="step-5-create-docker-configuration#Dockerizing-React-app-Nodejs-Postgres-&amp;-NginX[dev].md-step-5-create-docker-configuration">Step 5: Create Docker Configuration</h3><section><h4 id="-1148225448#1-create-dockerfile-dev" data-toc="1-create-dockerfile-dev#Dockerizing-React-app-Nodejs-Postgres-&amp;-NginX[dev].md-1-create-dockerfile-dev">1. Create Dockerfile.dev</h4><p id="-1148225448#-q8l2nj_170">Create a file named <span class="inline-code" id="-1148225448#-q8l2nj_174">Dockerfile.dev</span> in the root directory with the following content:</p><div class="detached code-block" id="-1148225448#-q8l2nj_171"><pre><code class="language-none"># Use Alpine Node.js runtime as a parent image
FROM node:20.16.0-alpine

# Set the working directory in the container
WORKDIR /app

# Copy package.json and pnpm-lock.yaml (or package-lock.json)
COPY package*.json pnpm-lock.yaml ./

# Install dependencies
RUN npm install

# Copy the rest of the application code
COPY . .

# Expose port 8000
EXPOSE 8000

# Command to run the application
CMD [&quot;npm&quot;, &quot;run&quot;, &quot;dev&quot;]</code></pre></div></section><section><h4 id="-1148225448#2-create-dockerignore" data-toc="2-create-dockerignore#Dockerizing-React-app-Nodejs-Postgres-&amp;-NginX[dev].md-2-create-dockerignore">2. Create .dockerignore</h4><p id="-1148225448#-q8l2nj_176">Create a <span class="inline-code" id="-1148225448#-q8l2nj_180">.dockerignore</span> file to ensure unnecessary files aren't copied into the Docker image:</p><div class="detached code-block" id="-1148225448#-q8l2nj_177"><pre><code class="language-none">node_modules
build
.git
.gitignore
Dockerfile
Dockerfile.dev
.dockerignore
*.log
.DS_Store
.git</code></pre></div></section></section><section><h3 id="-1148225448#step-6-define-the-npm-scripts" data-toc="step-6-define-the-npm-scripts#Dockerizing-React-app-Nodejs-Postgres-&amp;-NginX[dev].md-step-6-define-the-npm-scripts">Step 6: Define the NPM Scripts</h3><p id="-1148225448#-q8l2nj_181">Open your <span class="inline-code" id="-1148225448#-q8l2nj_187">package.json</span> and add a script for running the development server:</p><div class="detached code-block" id="-1148225448#-q8l2nj_182"><pre><code class="language-json">{
  &quot;scripts&quot;: {
    &quot;start&quot;: &quot;node index.js&quot;,  
    &quot;dev&quot;: &quot;nodemon index.js&quot;   
  }     
}</code></pre></div><p id="-1148225448#-q8l2nj_183">Ensure you have nodemon installed globally or as a dev dependency:</p><div class="detached code-block" id="-1148225448#-q8l2nj_184"><pre><code class="language-bash">npm install -g nodemon</code></pre></div><p id="-1148225448#-q8l2nj_185">Or:</p><div class="detached code-block" id="-1148225448#-q8l2nj_186"><pre><code class="language-bash">npm install --save-dev nodemon</code></pre></div></section><section><h3 id="-1148225448#step-7-running-the-application-with-docker" data-toc="step-7-running-the-application-with-docker#Dockerizing-React-app-Nodejs-Postgres-&amp;-NginX[dev].md-step-7-running-the-application-with-docker">Step 7: Running the Application with Docker</h3><section><h4 id="-1148225448#1-build-the-docker-image" data-toc="1-build-the-docker-image#Dockerizing-React-app-Nodejs-Postgres-&amp;-NginX[dev].md-1-build-the-docker-image">1. Build the Docker Image</h4><p id="-1148225448#-q8l2nj_191">Run the following command to build the Docker image using the development Dockerfile:</p><div class="detached code-block" id="-1148225448#-q8l2nj_192"><pre><code class="language-bash">docker build -t server -f Dockerfile.dev .</code></pre></div></section><section><h4 id="-1148225448#2-run-the-docker-container" data-toc="2-run-the-docker-container#Dockerizing-React-app-Nodejs-Postgres-&amp;-NginX[dev].md-2-run-the-docker-container">2. Run the Docker Container</h4><p id="-1148225448#-q8l2nj_195">Run the Docker container:</p><div class="detached code-block" id="-1148225448#-q8l2nj_196"><pre><code class="language-bash">docker run -it --rm -p 8000:8000 server</code></pre></div><p id="-1148225448#-q8l2nj_197">Explanation:</p><ul class="list" id="-1148225448#-q8l2nj_198" start="1"><li class="list-item" id="-1148225448#-q8l2nj_200"><p><span class="inline-code" id="-1148225448#-q8l2nj_201">-p 8000:8000</span>: Maps port 8000 on your machine to port 8000 in the container.</p></li></ul></section></section><section><h3 id="-1148225448#step-8-test-the-application" data-toc="step-8-test-the-application#Dockerizing-React-app-Nodejs-Postgres-&amp;-NginX[dev].md-step-8-test-the-application">Step 8: Test the Application</h3><p id="-1148225448#-q8l2nj_202">Open your browser or use a tool like Postman to test the endpoints:</p><ul class="list" id="-1148225448#-q8l2nj_203" start="1"><li class="list-item" id="-1148225448#-q8l2nj_204"><p><span class="control" id="-1148225448#-q8l2nj_205">GET</span> request to <span class="inline-code" id="-1148225448#-q8l2nj_206">http://localhost:8000/</span> should return &quot;Hi&quot;.</p></li></ul></section></section><section><h2 id="-1148225448#nginx-file-structure" data-toc="nginx-file-structure#Dockerizing-React-app-Nodejs-Postgres-&amp;-NginX[dev].md-nginx-file-structure">NGINX &amp; File structure</h2><p id="-1148225448#-q8l2nj_207">Nginx as a reverse proxy to route traffic between a React frontend (client) and an Express backend (API), using Docker. The configuration involves two files: default.conf (Nginx configuration) and Dockerfile.dev (Docker configuration for Nginx).</p><ul class="list" id="-1148225448#-q8l2nj_208" start="1"><li class="list-item" id="-1148225448#-q8l2nj_216"><p>Step 1: The structure looks like this:</p></li></ul><div class="detached code-block" id="-1148225448#-q8l2nj_209"><pre><code class="language-bash">nginx/
├── default.conf          # Nginx configuration file
└── Dockerfile.dev        # Dockerfile for building the Nginx image</code></pre></div><ul class="list" id="-1148225448#-q8l2nj_210" start="1"><li class="list-item" id="-1148225448#-q8l2nj_217"><p>Step 2: Configure default.conf for Nginx The default.conf file is an Nginx configuration file that routes traffic based on the request paths. Here&rsquo;s what the configuration does:</p></li></ul><div class="detached code-block" id="-1148225448#-q8l2nj_211"><pre><code class="language-javascript">upstream client {
    server client:5173;
}

upstream api {
    server api:8000;
}

server {
    listen 80;

    location / {
        proxy_pass http://client;
    }

    location /sockjs-node {
        proxy_pass http://client;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection &quot;Upgrade&quot;;
    }

    location /api {
        rewrite /api/(.*) /$1 break;
        proxy_pass http://api;
    }
}</code></pre></div><p id="-1148225448#-q8l2nj_212">Explanation:</p><ul class="list" id="-1148225448#-q8l2nj_213" start="1"><li class="list-item" id="-1148225448#-q8l2nj_218"><p id="-1148225448#-q8l2nj_221">Upstream Sections:</p><ul class="list" id="-1148225448#-q8l2nj_222" start="1"><li class="list-item" id="-1148225448#-q8l2nj_223"><p>upstream client: Defines a group of servers for the React frontend running on port 5173.</p></li><li class="list-item" id="-1148225448#-q8l2nj_224"><p>upstream api: Defines a group of servers for the Express backend running on port 8000.</p></li></ul></li><li class="list-item" id="-1148225448#-q8l2nj_219"><p id="-1148225448#-q8l2nj_225">Server Block:</p><ul class="list" id="-1148225448#-q8l2nj_226" start="1"><li class="list-item" id="-1148225448#-q8l2nj_227"><p>listen 80: Configures Nginx to listen on port 80 (standard HTTP port).</p></li><li class="list-item" id="-1148225448#-q8l2nj_228"><p>location /: Routes root URL requests to the React client.</p></li><li class="list-item" id="-1148225448#-q8l2nj_229"><p>location /sockjs-node: Special handling for WebSocket connections, typically used for hot-reloading in development.</p></li><li class="list-item" id="-1148225448#-q8l2nj_230"><p>location /api: Routes /api requests to the Express backend, rewriting the URL to strip the /api prefix.</p></li></ul></li><li class="list-item" id="-1148225448#-q8l2nj_220"><p id="-1148225448#-q8l2nj_231">Step 3: Create the Dockerfile.dev for Nginx The Dockerfile.dev will build a Docker image for Nginx that uses your custom configuration. The Dockerfile content is:</p></li></ul><div class="detached code-block" id="-1148225448#-q8l2nj_214"><pre><code class="language-dockerfile">FROM nginx
COPY ./default.conf /etc/nginx/conf.d/default.conf</code></pre></div><section><h3 id="-1148225448#step-by-step-guide-for-configuring-nginx-with-docker" data-toc="step-by-step-guide-for-configuring-nginx-with-docker#Dockerizing-React-app-Nodejs-Postgres-&amp;-NginX[dev].md-step-by-step-guide-for-configuring-nginx-with-docker">Step-by-Step Guide for Configuring Nginx with Docker</h3><p id="-1148225448#-q8l2nj_232">This guide walks you through setting up Nginx as a reverse proxy to route traffic between a React frontend (client) and an Express backend (API), using Docker. The configuration involves two files: <span class="inline-code" id="-1148225448#-q8l2nj_236">default.conf</span> (Nginx configuration) and <span class="inline-code" id="-1148225448#-q8l2nj_237">Dockerfile.dev</span> (Docker configuration for Nginx).</p><section><h4 id="-1148225448#step-1-understand-the-project-structure" data-toc="step-1-understand-the-project-structure#Dockerizing-React-app-Nodejs-Postgres-&amp;-NginX[dev].md-step-1-understand-the-project-structure">Step 1: Understand the Project Structure</h4><p id="-1148225448#-q8l2nj_238">From the provided image, the structure looks like this:</p><div class="detached code-block" id="-1148225448#-q8l2nj_239"><pre><code class="language-none">nginx/
├── default.conf          # Nginx configuration file
└── Dockerfile.dev        # Dockerfile for building the Nginx image</code></pre></div></section><section><h4 id="-1148225448#step-2-configure-default-conf-for-nginx" data-toc="step-2-configure-default-conf-for-nginx#Dockerizing-React-app-Nodejs-Postgres-&amp;-NginX[dev].md-step-2-configure-default-conf-for-nginx">Step 2: Configure default.conf for Nginx</h4><p id="-1148225448#-q8l2nj_241">The <span class="inline-code" id="-1148225448#-q8l2nj_246">default.conf</span> file is an Nginx configuration file that routes traffic based on the request paths. Here&rsquo;s what the configuration does:</p><div class="detached code-block" id="-1148225448#-q8l2nj_242"><pre><code class="language-nginx">upstream client {
    server client:5173;
}

upstream api {
    server api:8000;
}

server {
    listen 80;

    location / {
        proxy_pass http://client;
    }

    location /sockjs-node {
        proxy_pass http://client;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection &quot;Upgrade&quot;;
    }

    location /api {
        rewrite /api/(.*) /$1 break;
        proxy_pass http://api;
    }
}</code></pre></div><p id="-1148225448#-q8l2nj_243"><span class="control" id="-1148225448#-q8l2nj_247">Explanation:</span></p><ul class="list" id="-1148225448#-q8l2nj_244" start="1"><li class="list-item" id="-1148225448#-q8l2nj_248"><p id="-1148225448#-q8l2nj_250"><span class="control" id="-1148225448#-q8l2nj_252">Upstream Sections</span>:</p><ul class="list" id="-1148225448#-q8l2nj_251" start="1"><li class="list-item" id="-1148225448#-q8l2nj_253"><p><span class="inline-code" id="-1148225448#-q8l2nj_255">upstream client</span>: Defines a group of servers for the React frontend running on port 5173.</p></li><li class="list-item" id="-1148225448#-q8l2nj_254"><p><span class="inline-code" id="-1148225448#-q8l2nj_256">upstream api</span>: Defines a group of servers for the Express backend running on port 8000.</p></li></ul></li><li class="list-item" id="-1148225448#-q8l2nj_249"><p id="-1148225448#-q8l2nj_257"><span class="control" id="-1148225448#-q8l2nj_259">Server Block</span>:</p><ul class="list" id="-1148225448#-q8l2nj_258" start="1"><li class="list-item" id="-1148225448#-q8l2nj_260"><p><span class="control" id="-1148225448#-q8l2nj_264">listen 80</span>: Configures Nginx to listen on port 80 (standard HTTP port).</p></li><li class="list-item" id="-1148225448#-q8l2nj_261"><p><span class="control" id="-1148225448#-q8l2nj_265">location /</span>: Routes root URL requests to the React client.</p></li><li class="list-item" id="-1148225448#-q8l2nj_262"><p><span class="control" id="-1148225448#-q8l2nj_266">location /sockjs-node</span>: Special handling for WebSocket connections, typically used for hot-reloading in development.</p></li><li class="list-item" id="-1148225448#-q8l2nj_263"><p><span class="control" id="-1148225448#-q8l2nj_267">location /api</span>: Routes <span class="inline-code" id="-1148225448#-q8l2nj_268">/api</span> requests to the Express backend, rewriting the URL to strip the <span class="inline-code" id="-1148225448#-q8l2nj_269">/api</span> prefix.</p></li></ul></li></ul></section><section><h4 id="-1148225448#step-3-create-the-dockerfile-dev-for-nginx" data-toc="step-3-create-the-dockerfile-dev-for-nginx#Dockerizing-React-app-Nodejs-Postgres-&amp;-NginX[dev].md-step-3-create-the-dockerfile-dev-for-nginx">Step 3: Create the Dockerfile.dev for Nginx</h4><p id="-1148225448#-q8l2nj_271">The <span class="inline-code" id="-1148225448#-q8l2nj_276">Dockerfile.dev</span> will build a Docker image for Nginx that uses your custom configuration. The Dockerfile content is:</p><div class="detached code-block" id="-1148225448#-q8l2nj_272"><pre><code class="language-none">FROM nginx
COPY ./default.conf /etc/nginx/conf.d/default.conf</code></pre></div><p id="-1148225448#-q8l2nj_273"><span class="control" id="-1148225448#-q8l2nj_277">Explanation:</span></p><ul class="list" id="-1148225448#-q8l2nj_274" start="1"><li class="list-item" id="-1148225448#-q8l2nj_278"><p><span class="control" id="-1148225448#-q8l2nj_280">FROM nginx</span>: This uses the official Nginx image as the base image.</p></li><li class="list-item" id="-1148225448#-q8l2nj_279"><p><span class="control" id="-1148225448#-q8l2nj_281">COPY ./default.conf /etc/nginx/conf.d/default.conf</span>: Copies your custom Nginx configuration file (<span class="inline-code" id="-1148225448#-q8l2nj_282">default.conf</span>) into the appropriate directory inside the Nginx container (<span class="inline-code" id="-1148225448#-q8l2nj_283">/etc/nginx/conf.d/default.conf</span>), replacing the default configuration.</p></li></ul></section></section></section><section><h2 id="-1148225448#combined-project-structure-with-docker-compose" data-toc="combined-project-structure-with-docker-compose#Dockerizing-React-app-Nodejs-Postgres-&amp;-NginX[dev].md-combined-project-structure-with-docker-compose">Combined Project Structure with Docker Compose</h2><p id="-1148225448#-q8l2nj_284">Here's how to combine your <span class="inline-code" id="-1148225448#-q8l2nj_289">client</span>, <span class="inline-code" id="-1148225448#-q8l2nj_290">server</span>, and <span class="inline-code" id="-1148225448#-q8l2nj_291">nginx</span> components into a single project structure with a <span class="inline-code" id="-1148225448#-q8l2nj_292">docker-compose.yml</span> file that orchestrates the services. This structure is typical for a full-stack application setup using Docker Compose.</p><section><h3 id="-1148225448#project-structure" data-toc="project-structure#Dockerizing-React-app-Nodejs-Postgres-&amp;-NginX[dev].md-project-structure">Project Structure</h3><div class="detached code-block" id="-1148225448#-q8l2nj_293"><pre><code class="language-none">my-app/
├── client/                   # React frontend
│   ├── Dockerfile.dev        # Dockerfile for the React app (development)
│   ├── src/                  # Source code for React
│   ├── public/               # Public assets for React
│   ├── package.json          # Package configuration for React
│   └── ...                   # Other React files and folders
├── server/                   # Express backend
│   ├── Dockerfile.dev        # Dockerfile for the Express app (development)
│   ├── index.js              # Main entry point for the Express server
│   ├── keys.js               # Environment configuration file
│   ├── package.json          # Package configuration for Express
│   └── ...                   # Other server files and folders
├── nginx/                    # Nginx reverse proxy
│   ├── default.conf          # Nginx configuration file
│   └── Dockerfile.dev        # Dockerfile for Nginx (development)
└── docker-compose.yml        # Docker Compose configuration file</code></pre></div></section><section><h3 id="-1148225448#docker-compose-yml" data-toc="docker-compose-yml#Dockerizing-React-app-Nodejs-Postgres-&amp;-NginX[dev].md-docker-compose-yml">docker-compose.yml</h3><p id="-1148225448#-q8l2nj_295">Below is the <span class="inline-code" id="-1148225448#-q8l2nj_298">docker-compose.yml</span> file that defines all the services:</p><div class="detached code-block" id="-1148225448#-q8l2nj_296"><pre><code class="language-yaml">version: &quot;3.8&quot;
services:
  postgres:
    image: &quot;postgres:latest&quot;
    environment:
      - POSTGRES_PASSWORD=postgres_password
    ports:
      - &quot;5432:5432&quot;
    restart: always

  nginx:
    container_name: nginx
    build:
      context: ./nginx
      dockerfile: Dockerfile.dev  # Change to `Dockerfile` for production
    ports:
      - &quot;3500:80&quot;
    depends_on:
      - api
      - client
    restart: always    

  api:
    build:
      context: &quot;./server&quot;
      dockerfile: Dockerfile.dev # Change to `Dockerfile` for production
    volumes:
      - /app/node_modules
      - ./server:/app
    environment:
      - PGUSER=postgres
      - PGHOST=postgres
      - PGDATABASE=postgres
      - PGPASSWORD=postgres_password
      - PGPORT=5432
    depends_on:
      - postgres
    ports:
      - &quot;8000:8000&quot;
    restart: always

  client:
    stdin_open: true
    build:
      context: ./client
      dockerfile: Dockerfile.dev # Change to `Dockerfile` for production
    volumes:
      - /app/node_modules
      - ./client:/app
    ports:
      - &quot;5173:5173&quot;
    depends_on:
      - api
    restart: always</code></pre></div></section><section><h3 id="-1148225448#explanation-of-the-docker-compose-yml-services" data-toc="explanation-of-the-docker-compose-yml-services#Dockerizing-React-app-Nodejs-Postgres-&amp;-NginX[dev].md-explanation-of-the-docker-compose-yml-services">Explanation of the docker-compose.yml Services</h3><ol class="list list-decimal" id="-1148225448#-q8l2nj_300" type="1" start="1"><li class="list-item" id="-1148225448#-q8l2nj_302"><p id="-1148225448#-q8l2nj_306"><span class="control" id="-1148225448#-q8l2nj_308">Postgres</span>:</p><ul class="list" id="-1148225448#-q8l2nj_307" start="1"><li class="list-item" id="-1148225448#-q8l2nj_309"><p>This service runs the PostgreSQL database.</p></li><li class="list-item" id="-1148225448#-q8l2nj_310"><p><span class="inline-code" id="-1148225448#-q8l2nj_313">environment</span>: Sets the environment variable <span class="inline-code" id="-1148225448#-q8l2nj_314">POSTGRES_PASSWORD</span> to <span class="inline-code" id="-1148225448#-q8l2nj_315">postgres_password</span> for the database.</p></li><li class="list-item" id="-1148225448#-q8l2nj_311"><p><span class="inline-code" id="-1148225448#-q8l2nj_316">ports</span>: Exposes port <span class="inline-code" id="-1148225448#-q8l2nj_317">5432</span> for database connections.</p></li><li class="list-item" id="-1148225448#-q8l2nj_312"><p><span class="inline-code" id="-1148225448#-q8l2nj_318">restart: always</span>: Ensures the container restarts automatically in case of a failure.</p></li></ul></li><li class="list-item" id="-1148225448#-q8l2nj_303"><p id="-1148225448#-q8l2nj_319"><span class="control" id="-1148225448#-q8l2nj_321">Nginx</span>:</p><ul class="list" id="-1148225448#-q8l2nj_320" start="1"><li class="list-item" id="-1148225448#-q8l2nj_322"><p>Acts as a reverse proxy, routing requests to the <span class="inline-code" id="-1148225448#-q8l2nj_326">client</span> (React frontend) and <span class="inline-code" id="-1148225448#-q8l2nj_327">api</span> (Express backend) services.</p></li><li class="list-item" id="-1148225448#-q8l2nj_323"><p><span class="inline-code" id="-1148225448#-q8l2nj_328">build</span>: Builds the Nginx image from the <span class="inline-code" id="-1148225448#-q8l2nj_329">Dockerfile.dev</span> located in the <span class="inline-code" id="-1148225448#-q8l2nj_330">nginx</span> directory.</p></li><li class="list-item" id="-1148225448#-q8l2nj_324"><p><span class="inline-code" id="-1148225448#-q8l2nj_331">ports</span>: Exposes port <span class="inline-code" id="-1148225448#-q8l2nj_332">3500</span> on the host, mapping it to port <span class="inline-code" id="-1148225448#-q8l2nj_333">80</span> inside the container (where Nginx listens).</p></li><li class="list-item" id="-1148225448#-q8l2nj_325"><p><span class="inline-code" id="-1148225448#-q8l2nj_334">depends_on</span>: Ensures that the <span class="inline-code" id="-1148225448#-q8l2nj_335">api</span> and <span class="inline-code" id="-1148225448#-q8l2nj_336">client</span> services are started before Nginx.</p></li></ul></li><li class="list-item" id="-1148225448#-q8l2nj_304"><p id="-1148225448#-q8l2nj_337"><span class="control" id="-1148225448#-q8l2nj_339">API (Express)</span>:</p><ul class="list" id="-1148225448#-q8l2nj_338" start="1"><li class="list-item" id="-1148225448#-q8l2nj_340"><p>Runs the Express server.</p></li><li class="list-item" id="-1148225448#-q8l2nj_341"><p><span class="inline-code" id="-1148225448#-q8l2nj_346">build</span>: Builds the Express image from the <span class="inline-code" id="-1148225448#-q8l2nj_347">Dockerfile.dev</span> located in the <span class="inline-code" id="-1148225448#-q8l2nj_348">server</span> directory.</p></li><li class="list-item" id="-1148225448#-q8l2nj_342"><p><span class="inline-code" id="-1148225448#-q8l2nj_349">volumes</span>: Mounts the <span class="inline-code" id="-1148225448#-q8l2nj_350">server</span> directory and <span class="inline-code" id="-1148225448#-q8l2nj_351">node_modules</span> for hot-reloading in development.</p></li><li class="list-item" id="-1148225448#-q8l2nj_343"><p><span class="inline-code" id="-1148225448#-q8l2nj_352">environment</span>: Passes PostgreSQL connection environment variables to the Express server.</p></li><li class="list-item" id="-1148225448#-q8l2nj_344"><p><span class="inline-code" id="-1148225448#-q8l2nj_353">depends_on</span>: Ensures that the PostgreSQL service is up and running before the API service starts.</p></li><li class="list-item" id="-1148225448#-q8l2nj_345"><p><span class="inline-code" id="-1148225448#-q8l2nj_354">ports</span>: Exposes port <span class="inline-code" id="-1148225448#-q8l2nj_355">8000</span> for the Express API.</p></li></ul></li><li class="list-item" id="-1148225448#-q8l2nj_305"><p id="-1148225448#-q8l2nj_356"><span class="control" id="-1148225448#-q8l2nj_358">Client (React)</span>:</p><ul class="list" id="-1148225448#-q8l2nj_357" start="1"><li class="list-item" id="-1148225448#-q8l2nj_359"><p>Runs the React frontend.</p></li><li class="list-item" id="-1148225448#-q8l2nj_360"><p><span class="inline-code" id="-1148225448#-q8l2nj_364">build</span>: Builds the React image from the <span class="inline-code" id="-1148225448#-q8l2nj_365">Dockerfile.dev</span> located in the <span class="inline-code" id="-1148225448#-q8l2nj_366">client</span> directory.</p></li><li class="list-item" id="-1148225448#-q8l2nj_361"><p><span class="inline-code" id="-1148225448#-q8l2nj_367">volumes</span>: Mounts the <span class="inline-code" id="-1148225448#-q8l2nj_368">client</span> directory and <span class="inline-code" id="-1148225448#-q8l2nj_369">node_modules</span> for hot-reloading in development.</p></li><li class="list-item" id="-1148225448#-q8l2nj_362"><p><span class="inline-code" id="-1148225448#-q8l2nj_370">ports</span>: Exposes port <span class="inline-code" id="-1148225448#-q8l2nj_371">5173</span> for the React development server.</p></li><li class="list-item" id="-1148225448#-q8l2nj_363"><p><span class="inline-code" id="-1148225448#-q8l2nj_372">depends_on</span>: Ensures the API service is running before the Client starts.</p></li></ul></li></ol></section><section><h3 id="-1148225448#step-by-step-setup-and-execution" data-toc="step-by-step-setup-and-execution#Dockerizing-React-app-Nodejs-Postgres-&amp;-NginX[dev].md-step-by-step-setup-and-execution">Step-by-Step Setup and Execution</h3><ol class="list list-decimal" id="-1148225448#-q8l2nj_373" type="1" start="1"><li class="list-item" id="-1148225448#-q8l2nj_375"><p id="-1148225448#-q8l2nj_377"><span class="control" id="-1148225448#-q8l2nj_379">Build and Start Services</span>:</p><ul class="list" id="-1148225448#-q8l2nj_378" start="1"><li class="list-item" id="-1148225448#-q8l2nj_380"><p id="-1148225448#-q8l2nj_382">Navigate to the root directory (<span class="inline-code" id="-1148225448#-q8l2nj_384">my-app/</span>) and run the following command to build and start all services:</p><div class="detached code-block" id="-1148225448#-q8l2nj_383"><pre><code class="language-bash">docker-compose up --build</code></pre></div></li><li class="list-item" id="-1148225448#-q8l2nj_381"><p id="-1148225448#-q8l2nj_385">The <span class="inline-code" id="-1148225448#-q8l2nj_386">--build</span> flag ensures that Docker builds the images before starting the containers.</p></li></ul></li><li class="list-item" id="-1148225448#-q8l2nj_376"><p id="-1148225448#-q8l2nj_387"><span class="control" id="-1148225448#-q8l2nj_389">Access the Application</span>:</p><ul class="list" id="-1148225448#-q8l2nj_388" start="1"><li class="list-item" id="-1148225448#-q8l2nj_390"><p>Visit <span class="inline-code" id="-1148225448#-q8l2nj_392">http://localhost:3500</span> in your browser to access the frontend, which is proxied through Nginx.</p></li><li class="list-item" id="-1148225448#-q8l2nj_391"><p>The React frontend interacts with the Express backend via the <span class="inline-code" id="-1148225448#-q8l2nj_393">/api</span> route, as defined in the Nginx configuration.</p></li></ul></li></ol><div class="container"><figure class="image-container"><img class="center image image-size" id="-1148225448#-q8l2nj_374" alt="devwebpreview.png" title="devwebpreview.png" src="D:/KelchoRepos/WritersideProjects/TEACH2GIVE-Docker/Writerside/images/devwebpreview.png" width="1795" height="451"><figcaption class="center-text">devwebpreview.png</figcaption></figure></div></section></section><section><h2 id="-1148225448#production-mode" data-toc="production-mode#Dockerizing-React-app-Nodejs-Postgres-&amp;-NginX[dev].md-production-mode">Production Mode</h2><p id="-1148225448#-q8l2nj_394">We are going to use all files in the development mode but make a couple of changes.ie our docker files will be <span class="inline-code" id="-1148225448#-q8l2nj_403">Docker</span> instead of <span class="inline-code" id="-1148225448#-q8l2nj_404">Docker.dev</span></p><div class="container"><figure class="image-container"><img class="center image image-size" id="-1148225448#-q8l2nj_395" alt="prod.png" title="prod.png" src="D:/KelchoRepos/WritersideProjects/TEACH2GIVE-Docker/Writerside/images/prod.png" width="1271" height="592"><figcaption class="center-text">prod.png</figcaption></figure></div><ul class="list" id="-1148225448#-q8l2nj_396" start="1"><li class="list-item" id="-1148225448#-q8l2nj_405"><p>Create Nginx folder in client folder and add <span class="inline-code" id="-1148225448#-q8l2nj_406">default.conf</span> with this code</p></li></ul><div class="detached code-block" id="-1148225448#-q8l2nj_397"><pre><code class="language-javascript">server {
    listen 5173;

    location / {
        root /usr/share/nginx/html;
        index index.html index.html;
        try_files $uri/ $uri/ /index.html
    }
}</code></pre></div><ul class="list" id="-1148225448#-q8l2nj_398" start="1"><li class="list-item" id="-1148225448#-q8l2nj_407"><p>inside the client folder, add a <span class="inline-code" id="-1148225448#-q8l2nj_408">Docker</span> file</p></li></ul><div class="detached code-block" id="-1148225448#-q8l2nj_399"><pre><code class="language-none">#use alpine Node.js runtime as a parent image and name it as builder
FROM node:20.16.0-alpine as builder

# Set the working directory in the container
WORKDIR /app

# Copy package.json and package-lock.json
COPY package*.json ./

# Install dependencies
RUN npm i

# Copy the rest of the application code
COPY . .

RUN npm run build

FROM nginx

# Expose port 5173
EXPOSE 5173
# copy nginx configuration to the docker image
COPY ./nginx/default.conf /etc/nginx/conf.d/default.conf
# copy all builded files
COPY --from=builder /app/build /usr/share/nginx/html</code></pre></div><p id="-1148225448#-q8l2nj_400">Summary in bullet points:</p><ul class="list" id="-1148225448#-q8l2nj_401" start="1"><li class="list-item" id="-1148225448#-q8l2nj_409"><p id="-1148225448#-q8l2nj_413"><span class="control" id="-1148225448#-q8l2nj_415">Base Image (Builder Stage)</span>:</p><ul class="list" id="-1148225448#-q8l2nj_414" start="1"><li class="list-item" id="-1148225448#-q8l2nj_416"><p>Uses <span class="inline-code" id="-1148225448#-q8l2nj_418">node:20.16.0-alpine</span> as the base image, named as <span class="inline-code" id="-1148225448#-q8l2nj_419">builder</span>.</p></li><li class="list-item" id="-1148225448#-q8l2nj_417"><p>Sets the working directory to <span class="inline-code" id="-1148225448#-q8l2nj_420">/app</span> inside the container.</p></li></ul></li><li class="list-item" id="-1148225448#-q8l2nj_410"><p id="-1148225448#-q8l2nj_421"><span class="control" id="-1148225448#-q8l2nj_423">Dependency Installation</span>:</p><ul class="list" id="-1148225448#-q8l2nj_422" start="1"><li class="list-item" id="-1148225448#-q8l2nj_424"><p>Copies <span class="inline-code" id="-1148225448#-q8l2nj_426">package.json</span> and <span class="inline-code" id="-1148225448#-q8l2nj_427">package-lock.json</span> into the container.</p></li><li class="list-item" id="-1148225448#-q8l2nj_425"><p>Installs Node.js dependencies using <span class="inline-code" id="-1148225448#-q8l2nj_428">npm i</span>.</p></li></ul></li><li class="list-item" id="-1148225448#-q8l2nj_411"><p id="-1148225448#-q8l2nj_429"><span class="control" id="-1148225448#-q8l2nj_431">Application Code</span>:</p><ul class="list" id="-1148225448#-q8l2nj_430" start="1"><li class="list-item" id="-1148225448#-q8l2nj_432"><p>Copies the entire application code into the container.</p></li><li class="list-item" id="-1148225448#-q8l2nj_433"><p>Runs the build process with <span class="inline-code" id="-1148225448#-q8l2nj_434">npm run build</span>.</p></li></ul></li><li class="list-item" id="-1148225448#-q8l2nj_412"><p id="-1148225448#-q8l2nj_435"><span class="control" id="-1148225448#-q8l2nj_437">Final Image (Nginx Stage)</span>:</p><ul class="list" id="-1148225448#-q8l2nj_436" start="1"><li class="list-item" id="-1148225448#-q8l2nj_438"><p>Uses <span class="inline-code" id="-1148225448#-q8l2nj_442">nginx</span> as the final base image.</p></li><li class="list-item" id="-1148225448#-q8l2nj_439"><p>Exposes port <span class="inline-code" id="-1148225448#-q8l2nj_443">5173</span> for the frontend.</p></li><li class="list-item" id="-1148225448#-q8l2nj_440"><p>Copies the Nginx configuration file (<span class="inline-code" id="-1148225448#-q8l2nj_444">default.conf</span>) to the appropriate location in the Nginx container.</p></li><li class="list-item" id="-1148225448#-q8l2nj_441"><p>Copies the built files from the <span class="inline-code" id="-1148225448#-q8l2nj_445">builder</span> stage to the Nginx web root directory (<span class="inline-code" id="-1148225448#-q8l2nj_446">/usr/share/nginx/html</span>).</p></li></ul></li></ul><section><h3 id="-1148225448#build-the-docker-image" data-toc="build-the-docker-image#Dockerizing-React-app-Nodejs-Postgres-&amp;-NginX[dev].md-build-the-docker-image">Build the Docker Image</h3><ul class="list" id="-1148225448#-q8l2nj_448" start="1"><li class="list-item" id="-1148225448#-q8l2nj_451"><p>cd to client folder, and run</p></li></ul><div class="detached code-block" id="-1148225448#-q8l2nj_449"><pre><code class="language-bash">docker build -t client-prod .</code></pre></div></section></section></article></div></section></div></body></html>